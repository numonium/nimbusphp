function hide(a){var b;"string"==typeof a?document.getElementById(a)&&(b=document.getElementById(a)):a&&(b=a),b&&(b.style.display="none")}function show(a){var b;"string"==typeof a?document.getElementById(a)&&(b=document.getElementById(a)):a&&(b=a),b&&(b.style.display="block")}function invisible(a){document.getElementById(a)&&(document.getElementById(a).style.visibility="hidden")}function visible(a){document.getElementById(a)&&(document.getElementById(a).style.visibility="visible")}function link(a){window.location.href=a}function clearField(a){a.value&&(a.value="")}function getSelectIndex(a,b){for(var c=0;c<a.length;c++)if(a.options[c].value==b)return c;return-1}function newOption(a,b){var c=document.createElement("option");return c.text=a,c.value=b,c}function appendOption(a,b){try{a.add(b,null)}catch(c){a.add(b)}}function containsOption(a,b,c){c||(c="text");for(var d=a.length;d--;){if("text"==c&&a[d].text===b)return!0;if("value"==c&&a[d].value===b)return!0}return!1}function getClickedLink(a){if(!a)var a=window.event;var b=a.target||a.srcElement;return 3==b.nodeType&&(b=b.parentNode),b}function addBefore(a,b){b.parentNode.insertBefore(a,b)}function addAfter(a,b){b.parentNode.insertBefore(a,b.nextSibling)}function encodeLocation(a){a=a.split(",");for(var b="",c=a.length-1;c>=0;c--)""!=a[c]&&(b+=urlencode(trim(a[c]).toLowerCase())+(c>0?"|":""));return b}function changeTitle(a){var b=document.title.toString().split(TITLE_SEP);a=a?[a,b[b.length-2],b[b.length-1]]:[b[b.length-2],b[b.length-1]],setTitle(a.join(TITLE_SEP))}function setTitle(a,b){b||(b=document),b.title=a}function getTitle(a){return a||(a=document),a.title}function removeChildren(a){for(;a.hasChildNodes();)a.removeChild(a.lastChild)}function close(a,b,c){c||(c=function(){a.close()}),setTimeout(c,1e3*b)}function trim_ary(a,b){if(b){var c=[];for(var d in a)""!=a[d]&&null!==a[d]&&a[d]&&c.push(a[d])}else{var c=a;for(var d in c)""!=c[d]&&c[d]||c.splice(d,1)}return c}function dump(){var a="\n",b=implode(a,toArray(arguments));alert(b)}function dumpAry(){var b="";for(arg in arguments){b+=arg+"\n";for(a in arg)b+="	"+a+"\n"}alert(b)}function var_dump(){var a="",b=" ",c=4,d=0,e=0;this.window.document;var g=function(a){var b=/\W*function\s+([\w\$]+)\s*\(/.exec(a);return b?b[1]:"(Anonymous)"},h=function(a,b){for(var c="",d=0;a>d;d++)c+=b;return c},i=function(a){var b="";return null===a?b="NULL":"boolean"==typeof a?b="bool("+a+")":"string"==typeof a?b="string("+a.length+') "'+a+'"':"number"==typeof a?b=parseFloat(a)==parseInt(a,10)?"int("+a+")":"float("+a+")":void 0===a?b="UNDEFINED":"function"==typeof a&&(b=a.toString()),b},j=function(a,b,c,e){var f="";b>0&&b++;var k=h(c*(b-1),e),l=h(c*(b+1),e),m="",n="";if("object"==typeof a&&null!==a){if(a.constructor&&"PHPJS_Resource"===g(a.constructor))return a.var_dump();d=0;for(f in a)d++;m+="array("+d+") {\n";for(var o in a)"object"==typeof a[o]&&null!==a[o]?m+=l+"["+o+"] =>\n"+l+j(a[o],b+1,c,e):(n=i(a[o]),m+=l+"["+o+"] =>\n"+l+n+"\n");m+=k+"}\n"}else m=i(a);return m};for(a=j(arguments[0],0,c,b),e=1;e<arguments.length;e++)a+="\n"+j(arguments[e],0,c,b);return a}function implode(a,b){return b instanceof Array?b.join(a):b}function add_json(varName,data){return eval("("+data+")")}function toArray(a){return Array.prototype.slice.call(a)}function is_array(a){return"object"==typeof a&&null!==a}function is_object(a){return"object"==typeof a&&null!==a}function is_int(a){return"number"==typeof a&&parseInt(a)==a}function includeCSS(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a);var c=document.getElementsByTagName("head")[0];c&&c.appendChild(b)}function isShowing(a){return a&&(""!=a.style.display.toString()&&"none"!=a.style.display.toString()||""!=a.style.visibility.toString()&&"hidden"!=a.style.visibility.toString())}function includeJS(a){var b=document.createElement("script");b.setAttribute("type","text/javascript"),b.setAttribute("src",a);var c=document.getElementsByTagName("head")[0];c&&c.appendChild(b)}function trim(a){for(var b=0,c=a.length-1;b<a.length&&" "==a[b];)b++;for(;c>b&&" "==a[c];)c-=1;return a.substring(b,c+1)}function urlencode(a){var b={},d=(a+"").toString(),e=function(a,b,c){var d=[];return d=c.split(a),d.join(b)};b["'"]="%27",b["("]="%28",b[")"]="%29",b["*"]="%2A",b["~"]="%7E",b["!"]="%21",b["%20"]="+",b["\u20ac"]="%80",b["\x81"]="%81",b["\u201a"]="%82",b.\u0192="%83",b["\u201e"]="%84",b["\u2026"]="%85",b["\u2020"]="%86",b["\u2021"]="%87",b.\u02c6="%88",b["\u2030"]="%89",b.\u0160="%8A",b["\u2039"]="%8B",b.\u0152="%8C",b["\x8d"]="%8D",b.\u017d="%8E",b["\x8f"]="%8F",b["\x90"]="%90",b["\u2018"]="%91",b["\u2019"]="%92",b["\u201c"]="%93",b["\u201d"]="%94",b["\u2022"]="%95",b["\u2013"]="%96",b["\u2014"]="%97",b["\u02dc"]="%98",b["\u2122"]="%99",b.\u0161="%9A",b["\u203a"]="%9B",b.\u0153="%9C",b["\x9d"]="%9D",b.\u017e="%9E",b.\u0178="%9F",d=encodeURIComponent(d);for(search in b)replace=b[search],d=e(search,replace,d);return d.replace(/(\%([a-z0-9]{2}))/g,function(a,b,c){return"%"+c.toUpperCase()})}function urlencode(a){var b={},d=(a+"").toString(),e=function(a,b,c){var d=[];return d=c.split(a),d.join(b)};b["'"]="%27",b["("]="%28",b[")"]="%29",b["*"]="%2A",b["~"]="%7E",b["!"]="%21",b["%20"]="+",b["\u20ac"]="%80",b["\x81"]="%81",b["\u201a"]="%82",b.\u0192="%83",b["\u201e"]="%84",b["\u2026"]="%85",b["\u2020"]="%86",b["\u2021"]="%87",b.\u02c6="%88",b["\u2030"]="%89",b.\u0160="%8A",b["\u2039"]="%8B",b.\u0152="%8C",b["\x8d"]="%8D",b.\u017d="%8E",b["\x8f"]="%8F",b["\x90"]="%90",b["\u2018"]="%91",b["\u2019"]="%92",b["\u201c"]="%93",b["\u201d"]="%94",b["\u2022"]="%95",b["\u2013"]="%96",b["\u2014"]="%97",b["\u02dc"]="%98",b["\u2122"]="%99",b.\u0161="%9A",b["\u203a"]="%9B",b.\u0153="%9C",b["\x9d"]="%9D",b.\u017e="%9E",b.\u0178="%9F",d=encodeURIComponent(d);for(search in b)replace=b[search],d=e(search,replace,d);return d.replace(/(\%([a-z0-9]{2}))/g,function(a,b,c){return"%"+c.toUpperCase()})}function getElementsByClassName(a,b){b||(b=document.getElementsByTagName("body")[0]);for(var c=[],d=new RegExp("\\b"+a+"\\b"),e=b.getElementsByTagName("*"),f=0,g="",h=0,i=e.length;i>h;h++)""!=e[h].className&&(g+=e[h].className+"\n"),d.test(e[h].className)&&(f++,c.push(e[h]));return c}function addEvent(a,b,c){"ready"==b?addReadyEvent(a,b,c):a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function urlL(){setInterval(function(){_url&&_url!=window.location.hash&&_e.fireEvent(null,this,"url_change",window.location.hash)},100)}function _regE(){return _e?(_e.addListener(this,"url_change",function(){var a=trim_ary(arguments,!0),b=a.length>0?a[0]:window.location.hash;$_url=url(b),_url=b}),void 0):!1}function isSSL(a){return a||(a=parent.location.protocol),-1!=a.indexOf("https://")}function url(a){return a||(a=window.location.hash),trim_ary(a.toString().substr(1).split("/"),!0)}function makeURL(a){return a||(a=$_url),"#/"+a.join("/")}function sameURL(a,b){return b||(b=window),a instanceof Array&&(a=makeURL(a)),b.location.hash==a}function toURL(a,b){sameURL(a,b)||toLoc(makeURL(a),b)}function toLoc(a,b){b||(b=window),b.location=a}function hash(a){return a?(window.location.hash=a,void 0):window.location.hash}function echo(){var arg="",argc=arguments.length,argv=arguments,i=0,win=this.window,d=win.document,ns_xhtml="http://www.w3.org/1999/xhtml",ns_xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul",holder,stringToDOM=function(a,b,c,d){var e="";c===ns_xul&&(e=' xmlns:html="'+ns_xhtml+'"');var f="<"+d+' xmlns="'+c+'"'+e+">"+a+"</"+d+">";if(win.DOMImplementationLS&&win.DOMImplementationLS.createLSInput&&win.DOMImplementationLS.createLSParser){var g=DOMImplementationLS.createLSInput();g.stringData=f;var h=DOMImplementationLS.createLSParser(1,null);return h.parse(g).firstChild}if(win.DOMParser)return(new DOMParser).parseFromString(f,"text/xml").documentElement.firstChild;if(win.ActiveXObject){var i=new ActiveXObject("MSXML2.DOMDocument");return i.loadXML(a),i.documentElement}for(holder=i.createElementNS&&i.documentElement.namespaceURI&&(null!==i.documentElement.namespaceURI||"html"!==i.documentElement.nodeName.toLowerCase()||i.contentType&&"text/html"!==i.contentType)?i.createElementNS(c,d):i.createElement(d),holder.innerHTML=a;holder.firstChild;)b.appendChild(holder.firstChild);return!1},ieFix=function(a){if(1===a.nodeType){var c,e,b=d.createElement(a.nodeName);if(a.attributes&&a.attributes.length>0)for(c=0,e=a.attributes.length;e>c;c++)b.setAttribute(a.attributes[c].nodeName,a.getAttribute(a.attributes[c].nodeName));if(a.childNodes&&a.childNodes.length>0)for(c=0,e=a.childNodes.length;e>c;c++)b.appendChild(ieFix(a.childNodes[c]));return b}return d.createTextNode(a.nodeValue)};for(i=0;argc>i;i++)if(arg=argv[i],this.php_js&&this.php_js.ini&&this.php_js.ini["phpjs.echo_embedded_vars"]&&(arg=arg.replace(/(.?)\{\$(.*?)\}/g,function(s,m1,m2){return"\\"!==m1?m1+eval(m2):s})),d.appendChild)if(d.body)if("Microsoft Internet Explorer"==win.navigator.appName)d.body.appendChild(ieFix(stringToDOM(arg)));else{var unappendedLeft=stringToDOM(arg,d.body,ns_xhtml,"div").cloneNode(!0);unappendedLeft&&d.body.appendChild(unappendedLeft)}else d.documentElement.appendChild(stringToDOM(arg,d.documentElement,ns_xul,"description"));else d.write&&d.write(arg)}function getIndex(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return c;return-1}function array_map(a){for(var b=arguments.length,c=arguments,d=c[1].length,e=0,f=1,g=0,h=[],i=[];d>e;){for(;b>f;)h[g++]=c[f++][e];g=0,f=1,a?("string"==typeof a&&(a=this.window[a]),i[e++]=a.apply(null,h)):i[e++]=h,h=[]}return i}function in_array(a,b,c){var d="",e=!!c;if(e){for(d in b)if(b[d]===a)return!0}else for(d in b)if(b[d]==a)return!0;return!1}function defined(a){return"undefined"!=typeof a&&"undefined"!=a}if(_&&_.noConflict)var __=_.noConflict();else if(_)var __=_;else var _={};_={_:{add:function(a){if(!(a&&a._class&&a.constructor&&_._.class_setup(a._class)))return _.log("_[_][load][block] :(",a._class._),!1;var b=a.base||_._,c=a._class.parents||a.parents||!1,d=a._class||!1;if(b[d._])return _.log("!!! class exists",b[d._],a),!1;if(b[d._]=a.constructor,c&&c.length&&b[c[0]]&&(b[d._].prototype=function(a,b){function c(){this.constructor=b.prototype.constructor,this.__super=a.prototype,this.__class=d}return parentConstruct={},c.prototype=a.prototype,new c}(b[c[0]],b[d._])),a.proto)for(var e in a.proto)a.proto.hasOwnProperty(e)&&(b[d._].prototype[e]=a.proto[e]);b[d._].__class||(b[d._].__class=d)},class_setup:function(a,b){if(!a)return!1;b=b||_._;var c=a.parents||a;if(!c||!c.length)return!0;for(var d in c)if(c.hasOwnProperty(d)&&!b[c[d]])return!1;return!0},ele:function(a){if(!a)return!1;var b=!1;return function(c){return _.is.string(a)||_.is.jquery(a)?_.is.jquery(a)||"."==a.charAt(0)||"#"==a.charAt(0)?b=c(a).get(0):!1:b=a}(jQuery),b},err:function(){window.console&&window.console.error(Array.prototype.slice.call(arguments))},extend:function(a,b){return(new _._._).extend(a,b)},file:{upload:{text:!1}},ready:!1,parentConstruct:function(a,b,c,d){if(b=b||{},d=d||_._,!a||!b||!c)return!1;if(c&&c.parents){for(var e in c.parents)c.parents.hasOwnProperty(e)&&d[c.parents[e]]&&d[c.parents[e]].apply(a,b);return!0}return!0}},admin:{_:!1},find:function(a){var b=!1;return function(c){if("object"==typeof a){var d="";if(a.tag||(a.tag="*"),d+=a.tag,a.attrs)for(var e in a.attrs)d+="[",d+="object"==typeof a.attrs[e]&&a.attrs[e].nodeName?a.attrs[e].nodeName+'="'+a.attrs[e].nodeValue:e+'="'+a.attrs[e],d+='"]';_.log("*[find][str]",d,a),b=c(d)}}(jQuery),b||!1},format:{time:function(a){var c=0,d=Math.floor(Math.round(a)/60),e=Math.round(a)%60;return 10>d&&(d="0"+d),10>e&&(e="0"+e),{h:c,m:d,s:e}}},has:{localStorage:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}return!1}},is:{array:function(a){return"[object Array]"===Object.prototype.toString.call(a)},decimal:function(a){return!isNaN(a)&&-1!=a.toString().indexOf(".")},defined:function(a){return"undefined"!=typeof a},_float:function(a){return _.is.decimal(a)},integer:function(a){return"number"==typeof a&&parseFloat(a)==parseInt(a,10)&&!isNaN(a)},_int:function(a){return _.is.integer(a)},jQuery:function(a){return jQuery&&a instanceof jQuery},jquery:function(a){return _.is.jQuery(a)},layer:function(a){return _.is.Layer(a)},Layer:function(a){if(!a)return!1;var b=_._.ele(a);return b?b.hasAttribute("data-layer"):!1},modal:function(a){return _.is.Modal(a)},Modal:function(a){return a?a instanceof _._.Modal||_.is.Page(a)&&a.layer&&a.layer instanceof _._.Modal:!1},object:function(a){return"object"==typeof a&&!_.is.array(a)},page:function(a){return _.is.Page(a)},Page:function(a){return a&&a instanceof _._.Page},ready:function(a){return a=a||document,a&&a.readyState&&"complete"==a.readyState},string:function(a){return"string"==typeof a},str:function(a){return _.is.string(a)},windowLayer:function(a){return _.is.WindowLayer(a)},WindowLayer:function(a){if(!a)return!1;var b=_._.ele(a);return b?b.hasAttribute("data-window-layer"):!1}},log:function(){window.console&&window.console.log(Array.prototype.slice.call(arguments))},mod:{},preload:function(a){!function(b){b(a).each(function(){b("<img/>")[0].src=this})}(jQuery)},routers:{},title:function(a){return _.tmp.title||(_.tmp.title={_:document.title}),document.title=a?a:_.tmp.title._,!0},tmp:{}},jQuery&&function(a){a(document).ready(function(){_._.ready=!0,a("html").removeClass("_-no--js").attr("data-_-js",1)})}(jQuery),Object.count=Object.size=function(a){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b},function(a,b){var c={_:"_",parents:[]};a._.add({_class:c,constructor:function(b){this._id=c._,this._cmd="_",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.uuid="",a._[c._].prototype.init.call(this,b)},proto:{ctor:function(){},init:function(){},inherits:function(a,c,d){var e;return e=c&&c.hasOwnProperty("constructor")?c.constructor:function(){return a.apply(this,arguments)},b.extend(e,a),ctor.prototype=a.prototype,e.prototype=new ctor,c&&b.extend(e.prototype,c),d&&b.extend(e,d),e.prototype.constructor=e,e.__super__=a.prototype,e},extend:function(a,b){var c=this.inherits(this,a,b);return c.extend=this.extend,c},parentConstruct:function(){return a._.parentConstruct(this,arguments,c)},register:function(b){this.uuid=a.str.uniqid(this._cmd+"--"),a._.LinkedListNode&&this instanceof a._.LinkedListNode&&!this.data&&(this.data=this.uuid),a.log("-router[register]["+this._id+"]["+this.uuid+"]",b,this),a.routers[this.uuid]=this,a.routers[this._cmd]||(a.routers[this._cmd]=this)}}})}(_,jQuery),function(a){a.array={count:function(a){var c,b=0;for(c in a)a.hasOwnProperty(c)&&b++;return b},del:function(a,b,c){if(!a)return!1;for(var d in a)a.hasOwnProperty(d)&&(c&&d==b||!c&&a[d]==b)&&a.splice(d,1);return a}}}(_),function(a){"use strict";var d,b=a.Base64,c="2.1.4";"undefined"!=typeof module&&module.exports&&(d=require("buffer").Buffer);var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a.charAt(c)]=c;return b}(e),g=String.fromCharCode,h=function(a){if(a.length<2){var b=a.charCodeAt(0);return 128>b?a:2048>b?g(192|b>>>6)+g(128|63&b):g(224|15&b>>>12)+g(128|63&b>>>6)+g(128|63&b)}var b=65536+1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320);return g(240|7&b>>>18)+g(128|63&b>>>12)+g(128|63&b>>>6)+g(128|63&b)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,j=function(a){return a.replace(i,h)},k=function(a){var b=[0,2,1][a.length%3],c=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),d=[e.charAt(c>>>18),e.charAt(63&c>>>12),b>=2?"=":e.charAt(63&c>>>6),b>=1?"=":e.charAt(63&c)];return d.join("")},l=a.btoa?function(b){return a.btoa(b)}:function(a){return a.replace(/[\s\S]{1,3}/g,k)},m=d?function(a){return new d(a).toString("base64")}:function(a){return l(j(a))},n=function(a,b){return b?m(a).replace(/[+\/]/g,function(a){return"+"==a?"-":"_"}).replace(/=/g,""):m(a)},o=function(a){return n(a,!0)},p=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),c=b-65536;return g((c>>>10)+55296)+g((1023&c)+56320);case 3:return g((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return g((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},r=function(a){return a.replace(p,q)},s=function(a){var b=a.length,c=b%4,d=(b>0?f[a.charAt(0)]<<18:0)|(b>1?f[a.charAt(1)]<<12:0)|(b>2?f[a.charAt(2)]<<6:0)|(b>3?f[a.charAt(3)]:0),e=[g(d>>>16),g(255&d>>>8),g(255&d)];return e.length-=[0,0,2,1][c],e.join("")},t=a.atob?function(b){return a.atob(b)}:function(a){return a.replace(/[\s\S]{1,4}/g,s)},u=d?function(a){return new d(a,"base64").toString()}:function(a){return r(t(a))},v=function(a){return u(a.replace(/[-_]/g,function(a){return"-"==a?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},w=function(){var c=a.Base64;return a.Base64=b,c};if(a.Base64={VERSION:c,atob:t,btoa:l,fromBase64:v,toBase64:n,utob:j,encode:n,encodeURI:o,btou:r,decode:v,noConflict:w},"function"==typeof Object.defineProperty){var x=function(a){return{value:a,enumerable:!1,writable:!0,configurable:!0}};a.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",x(function(){return v(this)})),Object.defineProperty(String.prototype,"toBase64",x(function(a){return n(this,a)})),Object.defineProperty(String.prototype,"toBase64URI",x(function(){return n(this,!0)}))}}}(this),function(a,b){b.cfg={img:{preview:{width:256,height:456},upload:{width:1920,height:1080}},nav:{filter:{q:{min_length:0}}},title:document.title,wysiwyg:{options:{autoresize:!1,buttonsAdd:["clips"],buttonsAdd_content:["_save","_cancel","clips"],resize:!1,imageUpload:"/admin/save?img",imageUploadCallback:function(a,c){b.log("@ wysiwyg img[upload]",a,c,this)},keyupCallback:function(c,d){var e=c.$frame?b.frame.doc(c.$frame[0]):document,f=e.getSelection();b.log("@ wysiwyg key "+b.get.key(d.keyCode),f,f.getRangeAt(0),d);var g=f.anchorNode.tagName?f.anchorNode:f.anchorNode.parentNode;f.anchorNode.tagName?f.anchorNode.tagName:f.anchorNode.parentNode.tagName,g.previousElementSibling||g.previousSibling,g.nextElementSibling||g.nextSibling,b.page.title(a(e).find("h1").text()),b.log("!!!",document.title)},keydownCallback:function(c,d){var e=c.$frame?b.frame.doc(c.$frame[0]):document,f=e.getSelection(),g=f.anchorNode.tagName?f.anchorNode:f.anchorNode.parentNode;f.anchorNode.tagName?f.anchorNode.tagName:f.anchorNode.parentNode.tagName;var i=g.previousElementSibling||g.previousSibling||!1,j=g.nextElementSibling||g.nextSibling;switch(b.log("@ wysiwyg key "+b.get.key(d.keyCode),g,f.getRangeAt(0),d),d.keyCode){case b.key.keys.backspace:0==f.anchorOffset&&"h1"==i.tagName.toLowerCase()&&(b.log("@ wysiwyg block +"),b.key._blocked=!0);break;case b.key.keys.del:if(f.anchorOffset==f.anchorNode.textContent.length&&"h1"==g.tagName.toLowerCase()){var k=b.str.trim(a(j).html());b.array.isin(k,["","<br>","<br />"])||(b.log("@ wysiwyg block +"),b.key._blocked=!0)}break;case b.key.keys.enter:"h1"==g.tagName.toLowerCase()&&(b.log("@ wysiwyg block +"),b.key._blocked=!0)}},plugins:["clips"]}}}}(jQuery,_),function(a){var c={_:"API",parents:["_"]};a._.add({_class:c,constructor:function(b){a._.parentConstruct(this,arguments,c),this._id=c._,this._cmd="api",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.uuid="",this.key="",a._[c._].prototype.init.call(this,b)},proto:{init:function(){}}}),a._.api={},a.api={}}(_,jQuery),function(a){a.args={ac:{appendTo:"",create:function(b,c){a.log("input[ac][create]",b,c)},open:function(b){var d=b.target||b.currentTarget||b,e=parent=!1;!function(a){return(e=a(d).autocomplete("widget").get(0))?(parent=a(d).parents("._-input--ac--wrapper").get(0),a(e).css({width:"auto",left:a(parent).hasClass("_-blank")?"20px":"22.5%",right:"6px"}),void 0):!1}(jQuery),a.log("input[ac][open]",b,$(e).css("top"))},source:function(b,c){$.ajax({url:"/_",dataType:"json",data:{ac:a.tmp.actype,num:a.tmp.max},success:function(a){c($.map(a,function(a){return{label:a.name,value:a.ticker}}))}})},minLength:0,response:function(b,c){a.log("333",c.content),a.log("444",arguments,b)},select:function(b,c){b.preventDefault();var d=b.target||b.currentTarget||b,f=(a.field.get_type(d),parent=!1);!function(e){if(parent=e(d).parents("._-input--ac--wrapper").get(0),f=e(parent).clone(!0,!1),a.log("input[ac][clone]",e(d).parents("._-input--ac--wrapper"),b.target,d,parent),e(parent).find("._-input--ticker--wrapper._-blank").removeClass("_-blank"),e(parent).removeClass("_-blank").find("._-selected").removeClass("_-selected"),e(d).val(c.item.label).siblings("._-input--ticker--ticker").find("._-text").html(c.item.value),!e(parent).siblings("._-blank").length){e(f).remove(".ui-autocomplete").find("._-input--ac").val("");var g=e(parent).css("z-index");g&&(g=parseInt(g))&&e(f).css("z-index",g-10);var i=a.args.ac;i.appendTo=f||"body",e(f).find(".ui-autocomplete").remove(),e(f).appendTo(parent.parentNode),e(f).find("._-input--ac").autocomplete(i).focus(function(){e(this).autocomplete("search",e(this).val())}).focus(),e(parent).find("._-input--ac").blur()}}(jQuery),a.log("!!select",d,c.item.label)}},animate:{duration:500}}}(_),function(a){a.e={date:{close:function(a,b){if(!b||!b.input)return!1;var c=b.input,d=end=!1;!function(b){b(c).hasClass("_-input--date--start")?(d=c[0],end=b(d).parents("._-input--date--group").find("input._-input--date--end").datepicker("option","minDate",a)):(end=c[0],d=b(end).parents("._-input--date--group").find("input._-input--date--start").datepicker("option","maxDate",a))}(jQuery)},focus:function(b){var c=a.str.css._.prefix+a.str.css.input.prefix,d=a.str.css._.sep,e=a.str.css.wrapper,f=a.str.css._.prefix+a.str.css.selected,g=b.currentTarget||g,i=(g.className.split(" "),a.field.get_type(g)),j=parent=!1;return i?(j=[c,i,e].join(d),function(a){(parent=a(g).parents("."+j).get(0))&&a(parent).addClass(f)}(jQuery),void 0):!1},blur:function(b){var c=a.str.css._.prefix+a.str.css.input.prefix,d=a.str.css._.sep,e=a.str.css.wrapper,f=a.str.css._.prefix+a.str.css.selected,g=b.currentTarget||g,i=(g.className.split(" "),a.field.get_type(g)),j=parent=!1;return i?(j=[c,i,e].join(d),function(a){(parent=a(g).parents("."+j).get(0))&&a(parent).removeClass(f)}(jQuery),void 0):!1}},file:{cancel:function(b){var c=b.currentTarget||b,d=input=parent=!1;!function(b){parent=b(c).parents("._-input--file--wrapper").get(0),d=b(parent).removeClass("_-selected").find("._-input--file--upload ._-text"),b(d).html(a._.file.upload.text?a._.file.upload.text:"Please Upload a File"),b(parent).parents("#_-step--form--tickers--q--file-wrapper--wrapper").length&&b("#_-step--form--tickers--q--custom--tickers ._-input--ticker--wrapper").removeClass("_-disabled").find("input").prop("disabled",!1)}(jQuery)},select:function(b){var c=b.currentTarget||c,d="_-selected";parent=!1,a.log("input[file][select]",c),function(a){parent=a(c).parents("._-input--file--select--wrapper").get(0),parent&&(a(parent).hasClass(d)?(a(c).removeClass(d).find('input[type="hidden"]').val(""),a(parent).removeClass(d)):(a(c).addClass(d).find('input[type="hidden"]').val("1"),a(parent).addClass(d)))}(jQuery)},update:function(b){var c=b.currentTarget||b,d=input=parent=val=!1;!function(b){parent=b(c).parents("._-input--file--wrapper").get(0),d=b(parent).addClass("_-selected").find("._-input--file--upload ._-text"),a._.file.upload.text||(a._.file.upload.text=b(d).html()),(val=b(c).val())&&(b(d).html(val),b(parent).parents("#_-step--form--tickers--q--file-wrapper--wrapper").length&&b("#_-step--form--tickers--q--custom--tickers ._-input--ticker--wrapper").addClass("_-disabled").find("input").prop("disabled",!0))}(jQuery),a.log("input[file][update]",a._.file.upload.text,b)},upload:function(b){var c=b.currentTarget||b,d=!1;return b.type?(a.log("input[file][upload]",b.type,c,$(c).siblings("._-input--file").get(0)),function(a){d=a(c).siblings("._-input--file").get(0),d&&d!=c&&a(d).click()}(jQuery),b.stopPropagation(),d?!0:!1):!1}},radio:{change:function(a){var b=a.currentTarget||a;if(!b||!b.value)return!1;switch(b.value){case"all":!function(a){a("#_-step--form--tickers--q--custom").hide()}(jQuery);break;case"custom":!function(a){a("#_-step--form--tickers--q--custom").show()}(jQuery)}}},str:"blur change click contextmenu copy cut dblclick error focus focusin focusout keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup mousewheel paste reset resize scroll select submit textinput unload wheel"}}(_),function(a,b){a.field={init:function(){b(document).ready(function(){b("._-form [data-_-ui-btn-select]").click(function(c){var d="data-_-ui-btn-select",e=c.currentTarget||c,f=b(e).parents("[data-_-ui-btn-wrapper]")[0],g=b(e).attr(d),h=b(e).attr("value");b(f).find('._-input--hidden[name="'+g+'"]').val(h),b(f).find("["+d+"]").removeClass("_-selected"),b(e).addClass("_-selected"),a.log("field[btn][select]",g,b(f).find('._-input--hidden[name="'+g+'"]'))}),b("._-form [data-_-ui-field-auto]").each(function(c,d){var e="data-_-ui-field-auto",g=(d.getAttribute(e),b(d).parents("["+e+"-wrapper]")[0]);b(g).find("["+e+"-target]")[0];var i=function(c,d){var f=(d.item,!1),g=d.item.value.split(", ");return g[g.length-1].toLowerCase().indexOf("united states")>=0?g.pop():g.length>2&&g.splice(g.length-2,1),d.item.value=g.join(", "),a.geo.lookup({address:d.item.value},function(c){var e=null;f=c.results[0].geometry.location,(e=b('._-form [name="dest[lat]"]').get(0))&&(e.value=f.lat),(e=b('._-form [name="dest[lng]"]').get(0))&&(e.value=f.lng),a.log("field[autocomplete][select][*Geo][lookup]",d.item,d.item.value,f),a.api.sfm.map._.recenter(f),a.api.sfm.map._.nearby({loc:f,type:"airport",rankby:"distance",radius:5e4,callback:function(a){b("._-input--field--vacation--airport--arrival").children().each(function(a,c){b(c).hasClass("_-placeholder")||b(c).remove()});for(var d in a)if(a.hasOwnProperty(d)){var e=a[d],f=b("._-input--field--vacation--airport--arrival").attr("data-_-field-select-option");b("._-input--field--vacation--airport--arrival").append('<option value="'+e.place_id+'"'+(f&&f==e.place_id?" selected":"")+">"+e.name+"</option>")}}})}),!0};d.value&&i(!1,{item:{value:d.value}}),b(d).autocomplete({source:function(a,b){jQuery.getJSON("http://gd.geobytes.com/AutoCompleteCity?callback=?&q="+a.term,function(a){b(a)})},appendTo:g,minLength:3,position:{my:"center top",at:"center bottom"},select:i})})})},get_type:function(a){if(!a)return!1;var b="_-input",c="--",f=a.className.split(" "),g=class_parent=parent=!1;if(f.length)for(var h=0;h<f.length;h++)if(f[h].indexOf(b)>=0&&(g=f[h].split(c),g[1]))return g[1];return!1}}}(_,jQuery),function(a){a.key={_blocked:!1,is:function(b,c){return c?a.key.keys[c]&&b.keyCode&&a.key.keys[c]==b.keyCode:!1},is_meta:function(b){return b&&(b==a.key.keys.ctrl||b==a.key.keys.shift||b==a.key.keys.alt||b==a.key.keys.up||b==a.key.keys.down||b==a.key.keys.left||b==a.key.keys.right||b==a.key.keys.apple||b==a.key.keys.meta||b==a.key.keys.win||b==a.key.keys.fn||b==a.key.keys.esc)},keys:{ctrl:17,ctrl_right:18,ctrl_r:18,shift:16,enter:13,backspace:8,bcksp:8,alt:18,alt_r:17,alt_right:17,space:32,apple:224,cmd:224,command:224,mac:224,meta:224,win:224,fn:null,up:38,down:40,left:37,right:39,esc:27,del:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}(_),function(a){a.str={css:{_:{prefix:"_-",sep:"--"},input:{prefix:"input"},selected:"selected",wrapper:"wrapper"},html:{decode:function(a,b){var c={},d="",e="",f="";if(e=a.toString(),!1===(c=this.get_html_translation_table("HTML_ENTITIES",b)))return!1;delete c["&"],c["&"]="&amp;";for(d in c)f=c[d],e=e.split(f).join(d);return e=e.split("&#039;").join("'")},encode:function(b,c,d,e){var f=a.str.html.get_html_translation_table("HTML_ENTITIES",c),g="";if(b=null==b?"":b+"",!f)return!1;if(c&&"ENT_QUOTES"===c&&(f["'"]="&#039;"),e||null==e)for(g in f)f.hasOwnProperty(g)&&(b=b.split(g).join(f[g]));else b=b.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(a,b,c){for(g in f)f.hasOwnProperty(g)&&(b=b.split(g).join(f[g]));return b+c});return b},get_html_translation_table:function(a,b){var e,c={},d={},f={},g={},h={},i={};if(f[0]="HTML_SPECIALCHARS",f[1]="HTML_ENTITIES",g[0]="ENT_NOQUOTES",g[2]="ENT_COMPAT",g[3]="ENT_QUOTES",h=isNaN(a)?a?a.toUpperCase():"HTML_SPECIALCHARS":f[a],i=isNaN(b)?b?b.toUpperCase():"ENT_COMPAT":g[b],"HTML_SPECIALCHARS"!==h&&"HTML_ENTITIES"!==h)throw new Error("Table: "+h+" not supported");c["38"]="&amp;","HTML_ENTITIES"===h&&(c["160"]="&nbsp;",c["161"]="&iexcl;",c["162"]="&cent;",c["163"]="&pound;",c["164"]="&curren;",c["165"]="&yen;",c["166"]="&brvbar;",c["167"]="&sect;",c["168"]="&uml;",c["169"]="&copy;",c["170"]="&ordf;",c["171"]="&laquo;",c["172"]="&not;",c["173"]="&shy;",c["174"]="&reg;",c["175"]="&macr;",c["176"]="&deg;",c["177"]="&plusmn;",c["178"]="&sup2;",c["179"]="&sup3;",c["180"]="&acute;",c["181"]="&micro;",c["182"]="&para;",c["183"]="&middot;",c["184"]="&cedil;",c["185"]="&sup1;",c["186"]="&ordm;",c["187"]="&raquo;",c["188"]="&frac14;",c["189"]="&frac12;",c["190"]="&frac34;",c["191"]="&iquest;",c["192"]="&Agrave;",c["193"]="&Aacute;",c["194"]="&Acirc;",c["195"]="&Atilde;",c["196"]="&Auml;",c["197"]="&Aring;",c["198"]="&AElig;",c["199"]="&Ccedil;",c["200"]="&Egrave;",c["201"]="&Eacute;",c["202"]="&Ecirc;",c["203"]="&Euml;",c["204"]="&Igrave;",c["205"]="&Iacute;",c["206"]="&Icirc;",c["207"]="&Iuml;",c["208"]="&ETH;",c["209"]="&Ntilde;",c["210"]="&Ograve;",c["211"]="&Oacute;",c["212"]="&Ocirc;",c["213"]="&Otilde;",c["214"]="&Ouml;",c["215"]="&times;",c["216"]="&Oslash;",c["217"]="&Ugrave;",c["218"]="&Uacute;",c["219"]="&Ucirc;",c["220"]="&Uuml;",c["221"]="&Yacute;",c["222"]="&THORN;",c["223"]="&szlig;",c["224"]="&agrave;",c["225"]="&aacute;",c["226"]="&acirc;",c["227"]="&atilde;",c["228"]="&auml;",c["229"]="&aring;",c["230"]="&aelig;",c["231"]="&ccedil;",c["232"]="&egrave;",c["233"]="&eacute;",c["234"]="&ecirc;",c["235"]="&euml;",c["236"]="&igrave;",c["237"]="&iacute;",c["238"]="&icirc;",c["239"]="&iuml;",c["240"]="&eth;",c["241"]="&ntilde;",c["242"]="&ograve;",c["243"]="&oacute;",c["244"]="&ocirc;",c["245"]="&otilde;",c["246"]="&ouml;",c["247"]="&divide;",c["248"]="&oslash;",c["249"]="&ugrave;",c["250"]="&uacute;",c["251"]="&ucirc;",c["252"]="&uuml;",c["253"]="&yacute;",c["254"]="&thorn;",c["255"]="&yuml;"),"ENT_NOQUOTES"!==i&&(c["34"]="&quot;"),"ENT_QUOTES"===i&&(c["39"]="&#39;"),c["60"]="&lt;",c["62"]="&gt;";for(e in c)c.hasOwnProperty(e)&&(d[String.fromCharCode(e)]=c[e]);return d}},ucwords:function(a){return(a+"").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(a){return a.toUpperCase()})},uniqid:function(a,b){"undefined"==typeof a&&(a="");var c,d=function(a,b){return a=parseInt(a,10).toString(16),b<a.length?a.slice(a.length-b):b>a.length?Array(1+(b-a.length)).join("0")+a:a};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,c=a,c+=d(parseInt((new Date).getTime()/1e3,10),8),c+=d(this.php_js.uniqidSeed,5),b&&(c+=(10*Math.random()).toFixed(8).toString()),c}}}(_),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(a){return 0==this.indexOf(a)}),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)}),function(a,b){var c={_:"Router",parents:["_"]};a._.add({_class:c,constructor:function(){a._.parentConstruct(this,arguments,c),this._id=c._,this._cmd="router",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.uuid="",this.url="",this.sep="/",this.current={cmd:"",args:{}},a._[c._].prototype.init.call(this,null)},proto:{go:function(b){a.log(this._id+"[go]",b);var c=["#"],d=cmd_args=str="";return b.cmd&&(d=b.cmd,c.push(b.cmd)),b.str&&(cmd_args=b.str,c.push(a.is.array(b.str)?b.str.join(this.sep):b.str)),b.force||this.current.cmd!=d||this.current.args!=cmd_args?(this.current.cmd=d,this.current.args=cmd_args,c.length&&(str+=c.join(this.sep)),a.log(this._id+"[go][->]",c,str),""!=str&&(window.location.hash=str),void 0):(a.log("block - "+this._id+"[go][same-cmd]",d,cmd_args,c,str),!1)
},init:function(){return jQuery?(b(window).on({hashchange:this.route,load:this.route}),a.log("router[init]",a.routers),void 0):(a.log("router[init] - no jquery :("),!1)},route:function(b){var c=window.location.pathname.substring(1).split("/"),d=window.location.hash.substring(2).split("/");if(!d[0])return a.log("err[router][route][no-hash]",c,d),!1;var e=d.shift();return a.routers[e]&&a.routers[e].route?(a.log(">> router[route]["+e+"]["+d[0]+"]",a.routers[e]),a.routers[e].route(b,{hash:d.join("/"),_hash:d})):(a.log("router[route][default]",b.currentTarget,c,e,d),void 0)}}}),a.router=new a._.Router,a.routers=a.routers||{}}(_,jQuery),function(a){var b={_:"Geo",parents:["_"]};a._.add({_class:b,constructor:function(c){a._.parentConstruct(this,arguments,b),this._id="Geo",this._cmd="geo",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.id=this.z=0,this.name="",this.slug="",this.shown=!1,this.type="window",this.html=this.content=this.ele=!1,this.key="AIzaSyCl3BwYhdAEtuCp8JVInl-hUf2SVTwq3u0",this.html=this.html||{},this.page=this.page||(c&&c.page?c.page:!1),this.z=0,this.page&&(this.page.layer=this),this.pagegroup=c&&c.pagegroup?c.pagegroup:{},this.timeline=c&&c.timeline?c.timeline:{},this.window=c&&(c.w||c.window)?c.w||c.window:window,this.cfg={classes:{_:"_-"+this.cmd,bg:"_-"+this.cmd+"--bg",wrapper:"_-"+this.cmd+"--wrapper",content:"_-"+this.cmd+"--content"},tags:{_:"div"},z:1e3},a._[b._].prototype.init.call(this,c)},proto:{init:function(){this.register()},lookup:function(a,b){var c="https://maps.googleapis.com/maps/api/geocode/json?key="+this.key;for(var d in a)a.hasOwnProperty(d)&&(c+="&"+d+"="+encodeURIComponent(a[d]));return $.getJSON(c,b)},nearby:function(b,c){if(!b)return!1;var d=b.type,e=b.loc;e&&(b.location=e.lat+","+e.lng),delete b.loc,b.types=a.is.array(d)?d=d.join("|"):d,delete b.type;var g="https://maps.googleapis.com/maps/api/place/nearbysearch/json?1";b.key=this.key;for(var h in b)b.hasOwnProperty(h)&&(g+="&"+h+"="+encodeURIComponent(b[h]));return $.ajax({dataType:"json",url:g,data:b,type:"GET",crossDomain:!0,success:function(b){a.log("@@@",b),c(b)}})}}}),a.geo=new a._.Geo}(_),function(a,b){var c={_:"Window",parents:["_"]};a._.add({_class:c,constructor:function(d){d&&d.noInit||a._.parentConstruct(this,arguments,c);var e=this;this._id=c._,this._cmd="window",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.uuid="",this.window=(d?d.w||d.window:!1)||window,this.width=this.height=this.ratio=0,this.wider=this.taller=this.square=!1,this.attrs={width:null,height:null,ratio:null,ratio_round:null,wider:null,taller:null},this.cursor=!1,this.ratios={narrow:.5,skinny:.6,thin:.75,sq:1,eq:1.25,normal:1.33,wide:1.5,fat:1.95,obese:2,_wider:!1,_taller:!1,_square:!1},this.ratios_current={},this.uuid="",this.clouds={_:function(b){a.log(this._id+"[clouds]",this,b);var d=b.shift();b.length||(b=!1),this.clouds[d]&&this.clouds[d].call(this,{hash:b})},num:0,time:1e4,wrapper:!1,canvas:!1,intervals:{spawn:[],tick:[]},kill:function(){a.log(this._id+"[clouds][*kill]",this.clouds.wrapper,this.clouds.canvas);for(var d in this.clouds.intervals)if(this.clouds.intervals.hasOwnProperty(d))for(;this.clouds.intervals[d]&&this.clouds.intervals[d].length;)clearInterval(this.clouds.intervals[d].shift());b(this.clouds.wrapper).remove(),this.clouds.wrapper=!1,b(this.clouds.canvas).children().appendTo("body"),b(this.clouds.canvas).remove(),this.clouds.canvas=!1},move:function(c,d){d=d||{left:1,top:1};var e=Math.floor(4*Math.random()),f=(50*Math.random()+50)/100,g={top:""!==c.style.top?parseInt(c.style.top):100*Math.random(),left:""!==c.style.left?parseInt(c.style.left):100*Math.random()},h="%",i=20*Math.random(),j=Math.floor(2*Math.random());if(0===j?(d.left=1,d.top=1):(d.left=-1,d.top=-1),""===c.style.top&&""===c.style.left)return b(c).css({top:g.top+h,left:g.left+h}),a.log(this._id+"[clouds][move][init]",g.top+h,c.style.top,c.style.left),!0;var k=c.className.split(" ");k=k[k.length-1],a.log(this._id+"[clouds][move][*move]",k,""===c.style.top,j,d,g,i,g.top+i+h),g.left>=100?d.left=-1:g.left<=0&&(d.left=1),g.top>=100?d.top=-1:g.top<=0&&(d.top=1),0==e?b(c).css("top",g.top+d.top*i/2+h):1==e?b(c).css("left",g.left+d.left*i+h):2==e?b(c).css("top",g.top-d.top*i/2+h):3==e&&b(c).css("left",g.left+d.left*i+h),b(c).css("opacity",f),c.setAttribute(this.clouds.pole.attr+"-top",d.top),c.setAttribute(this.clouds.pole.attr+"-left",d.left)},pole:{_:{top:1,left:1},attr:"data-pole"},reset:function(){var d=this;for(a.log(this._id+"[clouds][*reset]",d,b(this.clouds.wrapper).find("._-icon--cloud")),this.clouds.wrapper&&b(this.clouds.wrapper).find("._-icon--cloud").css("opacity",0);this.clouds.intervals.tick&&this.clouds.intervals.tick.length;)clearInterval(this.clouds.intervals.tick.shift());setTimeout(function(){d.clouds.wrapper&&b(d.clouds.wrapper).find("._-icon--cloud").remove()},1e4)},start:function(){var d=this;a.log(this._id+"[clouds][*start]",d),b("._-icon--cloud").each(function(a,b){d.clouds.tick.call(d,a,b)}),this.clouds.intervals.spawn.push(setInterval(function(){d.clouds.spawn.call(d)},1.5*this.clouds.time)),this.clouds.spawn.call(this)},spawn:function(c){var d=0;if(c&&c.hash&&(d=parseInt(c.hash.shift()))&&d>0)for(var e=0;d>e;e++)this.clouds.spawn.call(this);var f=b('<a class="_-icon _-icon--cloud _-icon--cloud--'+this.clouds.num+'"><span class="_-icon--shadow"></span><span class="_-shape _-shape--cir _-shape--cir--1"></span><span class="_-shape _-shape--cir _-shape--cir--2"></span><span class="_-shape _-shape--cir _-shape--cir--3"></span></a>')[0];(this.clouds.canvas=b("body > ._-canvas").get(0))||(this.clouds.canvas=b('<div class="_-canvas" style="position:fixed;top:0;right:0;bottom:0;left:0;z-index:200;"></div>')[0],b("body > *").appendTo(this.clouds.canvas),b("body").append(this.clouds.canvas)),(this.clouds.wrapper=b("body > ._-icon--clouds--wrapper").get(0))||(this.clouds.wrapper=b('<div class="_-icon--clouds--wrapper" style="position:fixed;top:0;right:0;bottom:0;left:0;z-index:1;"></div>')[0],b("body").append(this.clouds.wrapper)),b(this.clouds.wrapper).append(f),this.clouds.tick.call(this,-1,f),a.log(this._id+"[clouds][*spawn]",this,f,this.clouds.wrapper)},tick:function(c,d){this.clouds.num++;var e=d,f=this;b(e).on({dblclick:function(c){a.log("cloud[*kill][single]",c);var d=c.currentTarget||c;b(d).remove()}});var g={top:1,left:1};e.hasAttribute(this.clouds.pole.attr+"-top")&&(g.top=parseInt(e.getAttribute(_attr+"-top"))),e.hasAttribute(this.clouds.pole.attr+"-left")&&(g.top=parseInt(e.getAttribute(this.clouds.pole.attr+"-left"))),a.log("cloud[tick]",this,e,e.style.top),this.clouds.intervals.tick.push(setInterval(function(){f.clouds.move.call(f,e,g)},this.clouds.time)),this.clouds.move.call(this,e,g)}},this.echo={_:function(b){a.log(this._id+"[echo][route]",b);var d=b.shift();this.echo[d]&&this.echo[d].call(this,{hash:b})},connect:function(b){b=b||io;var c=this instanceof a._.Window?this:a.window;return b&&b.connect?(a.log(this._id+"[echo][connect]",b),a.socket.node=io.connect("http://dev.numonium.com:1337"),a.socket.node.on("event",function(a){c.echo.e.call(c,a)}),!0):!1},e:function(b){if(!b)return!1;if(a.log(this._id+"[echo][e]",b),b.start)this.echo.uuid=b.start,a.log(this._id+"[echo][*uuid]",this.echo.uuid);else if(b.view)return a.log(this._id+"[echo][*view]",b.view),this.echo.replay.call(this,b.view);return!0},replay:function(c){a.log(this._id+"[echo][*replay]",c.type);var d=!1;c.type&&"mousemove"==c.type&&(this.cursor||(this.cursor=document.createElement("div"),this.cursor.setAttribute("class","_-window--cursor"),b(this.cursor).css({position:"fixed",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAtCAYAAADP5GkqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NDkyNmVkMy03OTJmLTQ3NDktYTVhOC04YzI1OWU4YWMwNzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzQ5MzY3QjA4RUYzMTFFM0FFMTBGMkM3OEYyMzA4MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTdFNTM2MjY4OUY2MTFFM0FFMTBGMkM3OEYyMzA4MDAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzQ5MjZlZDMtNzkyZi00NzQ5LWE1YTgtOGMyNTllOGFjMDc2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjc0OTI2ZWQzLTc5MmYtNDc0OS1hNWE4LThjMjU5ZThhYzA3NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvmUwJEAAAT1SURBVHja7FhJSCxnEP7nzbjMqDhuY3w+MeO8cYnrKLgEXNCgXnyYoCQHDx4kp3iQBNxOvosScDnoSYOgooIaQcQICjqLOhqjRkFwPwRUiKJRjFvGTtWf7qHd5k3P8rykoKZ7/v676qv6q+qvv0UMw5CXpFfkhenFAUj4f0QikfkWmOFdHU7c0j/pgcTExAiNRhPJA+E8QiQcczQyMvL96enptr+/v9OWitP5UDC1dnd3d8Pb21s1MTExq1KpcOjOWfHypNC7uzs6npCQkDY0NKSD2HB3FogPCoyPj08fHx//xdXVVeoMEBaFbW1tkYWFBZKbm5s1NjY2CUOujgZhUdDq6ipJTU0lGxsbJCcn5/O5uTmji4uLzJEgLAoJCQmhkYogdnZ28KrR6XR6T09PP0eBsEoApCTJyMjgQCROAnl5efk6AoTVL+/v71NPYFykpKQkTE9P6zw8POwGIejFo6MjVE7W1tawWkZDTMzI5fJP7AEh+KWTkxOSmZlJAzQ2NjZSq9VO+/j4vLYVhE2oEUR6ejpZWloicXFxEXq9fgpABNoCwua1Ozs7o4GJdSI6Ojp8dnZWD3tHkFAQdkXwxcUFycrKIvPz8yQyMlJtMBj0AQEBwUJA2J3Hl5eX1BPgARIREaGCwDQEBgZaDcIh1ezm5oZ6AgKSwO75KXjEGBwcrLQGhMNq+u3tLZZrMjU1RUJDQ9/MzMxooZK+ZUGIPkpPaDKZSHZ2NgciBDwxA9e3bGf16qM1pQhidHSUBAUFKVZWVn5Vq9XhrCfEDgcAfQKRSCSPxgsKCkhHRweBSik3Go1zMTEx8eikhzol9gIA60hfXx+tC9fX10QmkxE3Nzeyt7dHxOL/DPYFgvKtLS4u/mJwcHCR9YTpqaaUBktTU9M7+M/AGjLs+plZqVQyYNS9sYGBAYalf4BvmWcIAtWUlpaWw9cryANRUVFkfX2dVFRUkJaWFvN4VVUVKSwsxKUQFxUVNULP8BsEny/0libOKFB+A97yhf5Saqktf9YDSUlJDOwB1JLl5eVHnqmvr6fPYDlGWNEytoVz5zGSGz4z67QEAKoaFQ5bMHN1dcW5kV7Ly8vvAYA2njk4OKDP8vLyvnomyEXcmFUAwBoGyisD+U0Ft7e3a/Pz83/Ee2hQHsVCdXU1nbe4uPg7/JdaczCxCABaMebw8JAKHR4exuhNBQ7q7++fxLHa2tp7ACAlGWhg6fySkpJvWV1imwFwBJ6Yg+EkYAU+T05OLsBxXBYItnsgSktL6Tubm5s7UqnU3y4PIPX09BjwfILpzAYQXUNYDpp7jY2NjwISqh99t6am5v1zBe9ZAHhE7+zs/BIFdHV1TcNYOGu5O19AWFhYKky5wXkYJ3wAkOsUwPn5+TF0Sm8Ee6C5ufk7qFh6PBoAB7KW88kFf8D6n1BRb2/vo4yASkhBdHd3dwoBQMnPz08JfT+2V95PKOfP+ww65T9RERQpqry1tdWcqkjHx8d/KRQKtRAAYpYlH9grsMiQysrK92zqMdvb22bFkEFXdXV1P4Mh+TDt9UNZFj0ghOBwEgaK/+AUQ/llGhoaxiAl32HKoqOAvR42JY4CQK0qKyv7AZW3tbVNQNB9w8YOBq5caB2whcTQhKo1Gs3XcI+fUwIsKX4IQMRXzPtKJvRsIWYzwAP4b9z8rP1KJvr/S+lLA/hXgAEAcH+o0qfpzIcAAAAASUVORK5CYII=')",width:"32px",height:"45px"}),this.cursor.style.background=document.getElementsByTagName("body")[0].appendChild(this.cursor)),this.cursor.style.left=c.relX?c.relX*this.width+"px":c.pageX+"px",this.cursor.style.top=c.relY?c.relY*this.height+"px":c.pageY+"px",a.log(this._id+"[echo][*replay]["+c.type+"]",this.cursor,c.relX*this.width,c.pageX,c.relY*this.height,c.pageY)),c.target&&c.target.attributes&&(d=a.find({attrs:c.target.attributes}))&&(c.type&&"click"==c.type?(a.log(this._id+"[echo][replay][click]",d),b(d).click()):c.type&&"focus"==c.type&&(a.log(this._id+"[echo][replay][focus]",d),b(d).focus()),c.value&&(a.log(this._id+"[echo][replay][value]",c.value,d),b(d).val(c.value).change()))},start:function(c){if(!c)return a.log("err - "+this._id+"[echo][start] - no args",c),!1;var d=this;return a.log("Window[echo][start]",this),this.echo.connect.call(this,io)?(a.socket.node.emit("event",{server:"start"}),b(window).on(a.e.str,"","",function(b){for(var c={},e=["type","timeStamp","clientX","clientY","pageX","pageY","offsetX","offsetY","screenX","screenY","altKey","ctrlKey","shiftKey","button","buttons","cancelable","bubbles","eventPhase","attrChange","attrName","key","keyCode","metaKey"],f=0;f<e.length;f++)"undefined"!=typeof b[e[f]]&&(c[e[f]]=b[e[f]]);if(b.target){if(c.target&&""!=c.target||(c.target={attributes:{}}),b.target.attributes){var g={attrs:{}};for(var f in b.target.attributes)b.target.attributes[f].nodeName&&(c.target.attributes[f]={nodeName:b.target.attributes[f].nodeName,nodeType:b.target.attributes[f].nodeType,nodeValue:b.target.attributes[f].nodeValue},g.attrs[b.target.attributes[f].nodeName]=b.target.attributes[f].nodeValue,a.log(d._id+"[echo][start][packet][target][attr]",b.target.attributes[f],JSON.stringify(c.target.attributes[f])));a.log("## find",a.find(g),g)}b.target.value&&(c.value=b.target.value)}b.pageX&&(c.relX=b.pageX/d.width),b.pageY&&(c.relY=b.pageY/d.height),a.log("** e",b.target.attributes,c,b,a.socket.node),a.socket.node.emit("event",c)}),!0):!1},uuid:"",view:function(b){var c=!1;return b.hash&&b.hash[0]?c=b.hash[0]:this.echo.uuid&&(c=this.echo.uuid),a.log(this._id+"[echo][view]",c,b),this.echo.connect(io)&&a.socket.node.emit("event",{server:"view",uuid:c}),!0}},this.init=function(){this.register(),this.window=window,this.body=document.getElementsByTagName("body")[0],this.width=b(this.window).width(),this.height=b(this.window).height(),this.ratio=this.width/this.height,this.ratio_round=Math.ceil(100*this.ratio)/100,this.wider=this.width>this.height,this.taller=this.width<this.height,this.square=this.width==this.height,b(window).resize(this.resize),b(document).ready(function(){e.resize(e.window)})},this.init_attrs=function(c,d){if(c=c||e.window||window,c==e.window||c==window?e.body:c,!c)return!1;d||(d={width:e.width,height:e.height,ratio:e.ratio,ratio_round:e.ratio_round,wider:e.wider,taller:e.taller,square:e.square}),a.log(e._id+"[init-attrs]",e.ratios,c,d),b(c).attr({"data-window-width":d.width,"data-window-height":d.height,"data-window-ratio":d.ratio,"data-window-ratio-round":d.ratio_round});var g=JSON.parse(JSON.stringify(e.ratios));for(var h in g)g.hasOwnProperty(h)&&(g[h]=!1);d.width<d.height?g._taller=!0:d.width>d.height?g._wider=!0:g._square=!0,d.ratio_round>=e.ratios.fat&&(g.obese=!0),(d.ratio_round>e.ratios.wide&&d.ratio_round<=e.ratios.fat||g.obese)&&(g.fat=!0),(d.ratio_round>e.ratios.normal&&d.ratio_round<=e.ratios.wide||g.fat||g.obese)&&(g.wide=!0),d.ratio_round>e.ratios.eq&&d.ratio_round<=e.ratios.normal&&(g.normal=!0),d.ratio_round>e.ratios.sq&&d.ratio_round<=e.ratios.eq&&(g.eq=!0),d.ratio_round>e.ratios.thin&&d.ratio_round<=e.ratios.sq&&(g.sq=!0),d.ratio_round<=e.ratios.narrow&&(g.narrow=!0),(g.narrow||d.ratio_round>e.ratios.narrow&&d.ratio_round<=e.ratios.skinny)&&(g.skinny=!0),(g.narrow||g.skinny||d.ratio_round>e.ratios.skinny&&d.ratio_round<=e.ratios.thin)&&(g.thin=!0),e.ratios_current=g;for(var h in g)g.hasOwnProperty(h)&&(g[h]===!0?b("body").addClass("_-window--"+("_"==h.charAt(0)?h.substring(1):h)):b("body").removeClass("_-window--"+("_"==h.charAt(0)?h.substring(1):h)))},this.pitch={_:function(b){a.log(this._id+"[pitch][route]",b);var d=b.shift();this.pitch[d]&&this.pitch[d].call(this,{hash:b})},_connected:!1,connect:function(b){b=b||io;var c=this instanceof a._.Window?this:a.window;return c.pitch._connected?!0:b&&b.connect?(c.pitch._connected=!0,a.log(this._id+"[pitch][connect]",b),a.socket.node=io.connect("http://"+window.location.hostname+":1337"),a.socket.node.on("pitch",function(a){c.pitch.e.call(c,a)}),!0):(c.pitch._connected=!1,!1)},beat:function(b){if(!b||!b.data||!a.socket)return!1;var c=this instanceof a._.Window?this:a.window;c.pitch.connect(),b.channelData&&a.socket.node.emit("channelData",b.channelData),b.b64&&a.socket.node.emit("channelData-x64",b.b64)}},this.register=function(b){a.log("router[register]["+this._id+"]",b,this),a.routers[this._cmd]=this},this.resize=function(c){var d=c?c.currentTarget||c:e.window||window,f=b(d).width(),g=b(d).height();0==g&&a.log("ERR["+e._id+"][resize][no-height]",f,g,d);var h=f/g,i=Math.ceil(100*h)/100,j=document.getElementsByTagName("body")[0];d==e.window&&(e.width=f,e.height=g),e.init_attrs(j,{width:f,height:g,ratio:h,ratio_round:i}),f>g?(e.wider=!0,e.taller=e.square=!1,a.log("window[resize][wider]",f,g),b("*[data-window-sync]").each(function(c,d){var e;((e=b(d).attr("data-window-sync-height"))||(e=b(d).attr("width")))&&(a.log("window[resize][sync]",d),b(d).removeAttr("width").attr("height",e))})):g>f?(e.taller=!0,e.wider=e.square=!1,a.log("window[resize][taller]",f,g,c),b("[data-window-sync]").each(function(c,d){var e;((e=b(d).attr("data-window-sync-width"))||(e=b(d).attr("height")))&&(a.log("window[resize][sync]",d),b(d).removeAttr("height").attr("width",e))})):(e.square=!0,e.wider=e.taller=!1,a.log("window[resize][sq]",f,g,c))},this.init()}}),a.window=new a._.Window}(_,jQuery),function(a,b){var c=b.ui={_id:"ui",init:function(){a("form ._-ui--file-upload").each(function(a,c){b.ui.forms.upload.init({ele:c})}),c.img.load(),c.font.load(),c.font.size(),c.scroll.init(),b.e.load?c.eq.height():(a(window).load(function(){c.eq.height()}),a(window).resize(function(){setTimeout(c.eq.height,500)}))},editors:{ckeditor:{_:{},fn:{init:function(a,b){CKEDITOR.replace(a,b)}}},wysiwyg:{_:{},buttons:{_cancel:{title:"Cancel",callback:function(a,c,d){return b.ui.editors.wysiwyg.fn.destroy(a,c,d)}},_save:{title:"Save!",callback:function(a){if(!jQuery)return!1;var e=document.getElementById("_-form--admin"),f=!1;!function(a){a(e).find('input[name="page\\[content\\]"]').length>0&&(f=a(e).find('input[name="page\\[content\\]"]')[0])}(jQuery),f||(f=document.createElement("input"),f.setAttribute("name","page[content]"),f.setAttribute("type","hidden"),e.appendChild(f)),f.setAttribute("value",a.getCode()),e.submit(),b.log("> save",e,f)}}},fn:{destroy:function(a,c,d){return jQuery?(function(e){b.log("@ wysiwyg cancel",a,c,d,e(a.$editor).find("._-wysiwyg--link")),e(a.$editor).removeClass("_-wysiwyg--frame _-editable").unbind(".wysiwyg").find("._-wysiwyg--link").each(function(){href=this.getAttribute("loc")||this.getAttribute("href"),rel=this.getAttribute("rel"),rel&&"lightbox"==rel||this.setAttribute("href","#/admin/leave"+("/"!=href.charAt(0)?"/":"")+href)}).removeClass("_-wysiwyg--link"),a.$editor.destroyEditor()}(jQuery),!0):!1},drag:function(){},img:{drag:function(a){b.log("253 img[drag]",a)},mouseenter:function(a){var c=a.currentTarget||event.currentTarget||a,d=this;return b.log("223 img[mouseenter]",a,c),jQuery?(function(a){var c=a(d);c.hasClass("_-wysiwyg--dragging")||(c.is(":data(draggable)")||(c.draggable({containment:"._-wysiwyg--frame",start:function(){a(this).addClass("_-wysiwyg--dragging")},stop:function(){a(this).removeClass("_-wysiwyg--dragging")}}),b.log("223a img[drag] enabled",this)),b.log("223a img[drag] blocked",this))}(jQuery),void 0):!1},upload:function(a){if(!jQuery||!a)return!1;{var c={_:!1,id:!1,preview:!1,parent:!1,wrapper:!1,top:!1,link:!1},d={};last=!1}if(function(e){c.id=id=parseInt(b.array.last(e(a).attr("id").split("--"))),c.parent=a.parentNode,c.top=e(a).parents(".img--upload")[0],c._=e(c.top).find(".img--preview")[0],c.wrapper=c._.parentNode,c.fieldset=c.wrapper.parentNode,c.field=c.fieldset.parentNode,c.info=e(c.fieldset).find(".img--upload--info")[0],c.link=e(c.top).find(".img--link")[0],c.inputs=e(c.top).find(".img--upload--img--file");for(var f=0;f<c.inputs.length;f++)"file"==c.inputs[f].type?c.file=c.inputs[f]:"checkbox"==c.inputs[f].type&&(c.photo_delete=c.inputs[f]);if(siblings=e(c.top).siblings(),last=0==siblings.length?c.top:e(c.top).siblings(":last")[0],last_link=last.getElementsByTagName("a")[0],last==c.top||last!=c.top&&!e(last).hasClass("empty")){d.top=last.cloneNode(!0),last==c.top?e(last).removeClass("empty"):e(d.top).addClass("empty");var g=d.top.id.split("--");g[g.length-1]=id+1,d.top.id=g.join("--"),d.link=e(d.top).find(".img--link")[0],d._=e(d.top).find(".img--preview")[0],b.log("_new",id,d,last),d._.src="",g=d.link.id.split("--"),g[g.length-1]=id+1,d.link.id=g.join("--"),g=d.link.name.split("--"),g[g.length-1]=id+2,d.link.name=g.join("--"),d.img=e(d.top).find(".img--preview")[0],g=d.img.id.split("--"),g[g.length-1]=id+1,d.img.id=g.join("--"),d.inputs=e(d.top).find(".img--upload--img--file");for(var f=0;f<d.inputs.length;f++)"file"==d.inputs[f].type?d.file=d.inputs[f]:"checkbox"==d.inputs[f].type&&(d.photo_delete=d.inputs[f]);g=d.file.id.split("-"),g[g.length-1]=id+1,d.file.id=g.join("-"),d.file.value="",d.photo_delete&&(d.photo_delete.id="img--delete-"+(id+1),d.photo_delete.name="img--delete["+(id+1)+"]",d.photo_delete.checked=!1,d.label=e(d.top).find("label")[0],d.label.id="img--delete--label--"+(id+1),d.label.setAttribute("for",d.photo_delete.id)),d.legend=e(d.top).find("legend")[0],d.text=d.legend.firstChild,g=d.text.nodeValue.split("#"),g[g.length-1]=id+2,d.text.nodeValue=g.join("#"),e(d.top).find(".img--upload--info").hide(),b.log("baa",id,c,siblings.length,d)}}(jQuery),!c._)return!1;try{var g=new FileReader;g.onload=function(a){return function(){b.img.resize({data:g.result,file:a,img:c})}}(a.files[0]),b.log("87999",a.files[0]),g.readAsDataURL(a.files[0])}catch(h){c._.src=a.value}!function(a){a(c.top).removeClass("empty").find(".img--upload--info").show()}(jQuery),c.field.parentNode.appendChild(d.top),window.location.href="#"+(d.link?d.link.name:last_link.name)}},init:function(c,d){if(!jQuery)return!1;a||(a=jQuery),d=d||b.cfg.wysiwyg.options||{},b.log("+ wysiwyg[init][tag]",c.tagName,d);var e=iframe_body=iframe_content=iframe_content_main=iframe_head=iframe_page=iframe_title=iframe_title_wrapper=iframe_title_content=styles=!1,f=document.createElement("div");f.setAttribute("class","_-wysiwyg _-wysiwyg--wrapper _-loading");var g=!1;"textarea"==c.tagName.toLowerCase()?g=c:(g=document.createElement("textarea"),g.setAttribute("class","redactor"),g.setAttribute("name","page[content]"),d.buttonsAdd=d.buttonsAdd_content||d.buttonsAdd);var h=document.createElement("div");h.setAttribute("class","_-wysiwyg--content");var i=!1;return function(a){b.log("444",d,b.cfg.wysiwyg.options),b.redactor=a(c).redactor(d).data("redactor");var g=b.redactor._id||g;if(b.log("@ wysiwyg init",c.id,g,d,arguments),e=a(c).parent().find(".redactor_frame")[0]){b.log("@ wysiwyg iframe",e),iframe_doc=b.frame.doc(e),iframe_head=a(iframe_doc).find("head")[0],iframe_body=a(iframe_doc).find("body")[0],iframe_page=a(iframe_body).find("#page")[0],a(iframe_doc).find('*[contenteditable="true"]').keydown(b.e.keydown),a(iframe_doc).find('*[contenteditable="true"]').keyup(b.e.keyup),a(e).addClass("_-wysiwyg--frame"),a(iframe_body).attr("id","_-wysiwyg--frame--body--"+b.size(b.editors)).addClass("_-wysiwyg--frame--body "+a("body").attr("class").replace("_-admin","")),b.tmp.iframe_css="",b.tmp.iframe_head=iframe_head,b.tmp.iframe_ss=0,b.tmp.iframe_ss_length=document.styleSheets.length,b.tmp.stylesheets=[];for(var h=0;h<document.styleSheets.length;h++){var i=document.styleSheets[h].href;i&&(b.tmp.stylesheets.push({ele:document.styleSheets[h].ownerNode||document.styleSheets[h].ownerElement,path:i}),a.get(i,function(c){for(var d=!1,f=0;f<b.tmp.stylesheets.length;f++)if(b.tmp.stylesheets[f].path==this.url){d=b.tmp.stylesheets[f];break}a(b.tmp.iframe_head).append("<style"+(d?' id="'+d.ele.getAttribute("id")+'" class="'+d.ele.getAttribute("class")+'"':"")+' type="text/css">'+c+"</style>"),b.tmp.iframe_ss==b.tmp.iframe_ss_length-1&&b.ui.editors.wysiwyg.fn.show(e),b.tmp.iframe_ss++}))}iframe_content=document.createElement("div"),iframe_content.setAttribute("id","content"),iframe_content_main=document.createElement("div"),iframe_content_main.setAttribute("id","content--main"),iframe_content_main.setAttribute("class","_-wysiwyg--frame--content"),iframe_page.parentNode.removeChild(iframe_page),iframe_content_main.appendChild(iframe_page),iframe_content.appendChild(iframe_content_main),a(iframe_content_main).click(function(a){b.log("? click",a)}).on(b.ui.editors.wysiwyg.e.links,"a").find("a").addClass("_-wysiwyg--link").attr("href","javascript:;"),a(iframe_content_main).find("#page > *").dblclick(b.ui.editors.wysiwyg.toggle.menu.context),iframe_body.appendChild(iframe_content)}else e=a(c).parent().find(".redactor_editor")[0],a(e).addClass("_-wysiwyg--frame").on(b.ui.editors.wysiwyg.e.frame).on(b.ui.editors.wysiwyg.e.links,"a").find("a").addClass("_-wysiwyg--link _-tmp--wysiwyg--target").attr("href","javascript:;"),a(e).on(b.ui.editors.wysiwyg.e.img,"._-img").find("._-img").addClass("_-wysiwyg--img _-tmp--wysiwyg--target"),a(e).children().dblclick(b.ui.editors.wysiwyg.toggle.menu.context),b.log("@ wysiwyg iframe",e)}(jQuery),i},link:function(c){c=c||event;var d=c.currentTarget,f=(d.parentNode,""),g=d.getAttribute("loc")||d.getAttribute("href");jQuery&&function(a){f=a(d).text()}(jQuery);var h='<form id="redactorInsertLinkForm" method="post" action="javascript:;"><label><strong>URL:</strong> <input type="text" class="_-input--text" id="redactor_link_url" value="'+g+'" /></label>'+'<input type="hidden" id="redactor_link_url_text" contenteditable="true" value="'+f+'" />'+'<input type="submit" class="_-input--submit" id="redactor_insert_link_btn" value="&raquo;" />'+"</form>";b.ui.editors.wysiwyg.toggle.tooltip({ele:d,name:"link",content:h}),a("#redactor_insert_link_btn").click(function(){var d=a(this).parents("._-tmp--wysiwyg")[0];(target=a(d).children("a[loc]")[0])&&a(target).attr("loc",a("#redactor_link_url").val()),b.ui.editors.wysiwyg.toggle.tooltip({ele:target,name:"link",content:h,parent:d})}),b.log("@ wysiwyg link",d,g,a(d).text())},show:function(a){return jQuery?(function(b){b(a).parents("._-wysiwyg").removeClass("_-loading").addClass("_-loaded").find("._-wysiwyg--content").animate({opacity:0},500,function(){b(this).hide()}),b(a).parents("._-wysiwyg").find(".redactor_box").animate({opacity:1},500)}(jQuery),void 0):!1}},toggle:{menu:{context:function(a){a.preventDefault&&a.preventDefault();var c="asd",d=window.getSelection();"dblclick"==a.type&&b.log("* mouse[dblclick]",a,d,a),b.log("? toggle[context]",a,d,a),b.ui.editors.wysiwyg.toggle.tooltip({ele:a.currentTarget,name:"context",content:c,pos:{x:a.clientX,y:0},sel:d})}},tooltip:function(a){var c=a.content||"&nbsp;",d=a.ele||!1,e=a.name||"",f=a.parent||d.parentNode||!1,g=a.grandp||f.parentNode||!1,h=a.sel||!1;if(b.log("900",f,d,f.childNodes[0],f.childNodes[0]==d),h)return!0;if(f.getAttribute("class")&&b.array.isin("_-tmp--wysiwyg",f.getAttribute("class").split(" ")))b.log("- toggle["+e+"]",h,a),f.removeChild(d),g.replaceChild(d,f);else{b.log("+ toggle["+e+"]",h,a);var i=d.cloneNode(!0),j={};jQuery&&function(a){if(j=a(d).data("events"))for(var b in j)for(var c in j[b])a(i)[b](j[b][c].handler)}(jQuery);var k=document.createElement("span");k.setAttribute("class","_-tmp--wysiwyg _-tmp--wysiwyg--wrapper"),k.appendChild(i),f.replaceChild(k,d);var l=document.createElement("div");l.setAttribute("class","_-tooltip"+(e?" _-tooltip--"+e:"")),l.setAttribute("contenteditable",!1),l.setAttribute("id",b.str.uniqid("_-tooltip-"+(e?e+"-":""))),a.pos&&(a.pos.x||a.pos.y)&&(l.style.position="absolute",null!==a.pos.x&&(l.style.left=a.pos.x+"px"),null!==a.pos.y&&(l.style.top=b.is.int(a.pos.y)?a.pos.y+"px":a.pos.y));var m='<div class="_-tooltip--inner"><div class="_-pivot"><div class="_-arrow--wrapper"><span class="_-arrow"></span></div><div class="_-content">'+c+"</div>"+"</div>"+"</div>";l.innerHTML=m,k.appendChild(l)}}}}},eq:{height:function(){var b="data-_-ui-eq-height",c=0,d=!1,e=a("["+b+"]").children();a(e).each(function(e,f){var g=!1;if(g=a(f).find("["+b+"-vary]").get(0)){a(g).height("");var h=a(g).height();a(g).height(h),a(g).height()>d&&(d=a(g).height())}else a(f).height()>c&&(c=a(f).height())}).each(function(e,f){var g=!1;d&&(g=a(f).find("["+b+"-vary]").get(0))?a(g).height(d):a(f).height(c)})}},fancybox:{close:function(b){return b.after&&setTimeout(b.after,250),a.fancybox.close()}},font:{_:{WebFontConfig:{custom:{families:["sfm-icons"]},fontloading:function(b,c){console.log("***[ui][font][load]",b,c,a('[class^="_-icon--font--"]')),a('[class^="_-icon--font--"]').show()}}},family:function(a,b){return window.getComputedStyle(a,null).getPropertyValue(b)},load:function(){!function(){var a=document.createElement("script");a.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1.5.6/webfont.js",a.type="text/javascript",a.async="true";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),a('[class^="_-icon--font--"]').hide()},size:function(){a("[data-_-ui-font-size]").each(function(c,d){var e=a(d).text().length,f="";e>=30?f=".85em":e>=20?f="1em":e>=15&&(f="1.2em"),""!=f&&a(d).css("font-size",f),b.log("ui[font][size]",e,a(d).text(),d)})}},forms:{init:{ac:function(a,c){var d=b.ac;d=b.is.array(a)?b.array.nav(b.ac,a):d[a],jQuery&&function(e){var f=b.ac.src.base+"/"+a.join("/");b.log("ac1[ajax]",a,f,c),d||e.ajax({url:f,success:function(d){if(b.is.array(a))switch(a.length){case 1:b.ac[a[0]]=d;break;case 2:b.ac[a[0]][a[1]]=d;break;case 3:b.ac[a[0]][a[1]][a[2]]=d}else b.ac[a]=d;if(b.is.array(d)||b.is.object(d))for(var e in d)d.hasOwnProperty(e)&&(d[e].label=d[e].name||d[e].title||d[e].slug||e,d[e].value=d[e].slug||e);c&&b.ui.forms.ac(c)}})}(jQuery)}},upload:{init:function(a){var c=a.ele||a;return c.onclick=b.ui.forms.upload.click,"draggable"in document.createElement("span")?(c.ondragover=b.ui.forms.upload.drag_over,c.ondragend=b.ui.forms.upload.drag_end,c.ondrop=b.ui.forms.upload.drop,void 0):!1},click:function(c){var d=c.currentTarget||c;a(d).find("._-input--file").change(b.ui.forms.upload.change).click()},change:function(a){var c=a.currentTarget||a;c.files[0]&&b.ui.forms.upload.read({ele:c,files:c.files})},drag_over:function(b){b.preventDefault();var c=b.currentTarget||b;a(c).addClass("_-hover")},drag_end:function(b){var c=b.currentTarget||b;a(c).removeClass("_-hover")},drop:function(c){c.preventDefault();var d=c.currentTarget;a(d).removeClass("_-hover"),c.dataTransfer.files[0]&&b.ui.forms.upload.read({ele:a(d).find("._-input--file").get(0),files:c.dataTransfer.files})},read:function(d){var e=d.ele||!1,f=a(e).parents("._-ui--file-upload").get(0),g=d.files||(e&&e.files?e.files:!1);try{var h=new FileReader;for(var i in g)g.hasOwnProperty(i)&&(h.onload=function(d){var j=!1;b.log(c._id+"[ui][img-drop][*load]",i,g[i],f,e,a(f).find("[data-_-ui-upload-result]"),d.target.result),a(e).val(""),a(f).find("[data-_-ui-upload-result]").val(d.target.result),(j=a(f).find("._-ui--file-upload--img").get(0))||(j=new Image,j.className="_-ui--file-upload--img",f.appendChild(j)),b.log("ui[file-upload]",j,a(f).find("[data-_-ui-upload-result]").val()),j.src=h.result,a(f).addClass("_-selected")},h.readAsDataURL(g[i]))}catch(j){}}},ac:function(a){if(a||(a=b.sel.ui.forms.ac),b.is.string(a))return jQuery?(function(c){b.log("ac2["+a+"]",b.array.nav(b.ac,["features","property"])),b.ui.forms.ac(c(a).toArray())}(jQuery),!0):!1;if(b.is.array(a)){if(0==a.length)return!1;var e=[];for(var f in a)a.hasOwnProperty(f)&&(e[f]=b.ui.forms.ac(a[f]));return e}return b.log("ac3["+a.getAttribute("ac")+"]",a),b.is.object(a)&&(attr=a.getAttribute("ac"))?(e=!1,jQuery&&function(c){var d=[attr];c(a).attr("ac-type")&&d.push(c(a).attr("ac-type"));var f=b.array.nav(b.ac,d);return f?(c(a).autocomplete({source:f,minLength:2}),e=!0,void 0):(b.ui.forms.init.ac(d,a),!1)}(jQuery),e):void 0},i:{ac:0,infinite:0},infinite:function(c){var d="_-input--infinite",e=!1;if(c||(c=b.sel.ui.forms.infinite),b.is.string(c))return jQuery?(function(a){b.ui.forms.infinite(a(c).toArray()),a(document).on(b.ui.forms.e.infinite,c)}(jQuery),!0):!1;if(b.is.array(c)){if(0==c.length)return!1;var f=[];for(var g in c)c.hasOwnProperty(g)&&(f[g]=b.ui.forms.infinite(c[g]));return f}if(c.currentTarget){var h=c;c=h.currentTarget,b.log("infinite[e]",h),e=c.keyCode,clone=!1;var i=c.parentNode||c,j=i.parentNode||i,k=!1;if(b.log("infinite["+c.tagName+"]",a(c).next().length,c,c.nextSibling),!jQuery)return!1;!function(a){i=a(c).parents(d)[0]||a(c).parent()[0]||c,j=a(i).parent()[0]||i,k=a(i).next()[0]||k,0==a(i).next().length&&""!=a(c).val()?(c!=i&&a(i).hasClass(d)||b.ui.forms.infinite(c),b.log("inf[parent]",i,j),a(i).removeClass("_-blank"),clone=a(i).clone()[0],a(clone).addClass("_-blank"),a(clone).find(b.sel.ui.forms.infinite).val(""),b.ui.forms.ac(a(clone).find(b.sel.ui.forms.ac)[0]),a(j).append(clone),b.log("infinite[add]",a(c).next().length,c.nextSibling,clone)):""==a(c).val()&&(a(i).addClass("_-blank"),b.log("inf[blank]",e,b.key.keys.backsp,k,a(k).hasClass("_-blank")),k&&a(k).hasClass("_-blank")&&a(k).remove())
}(jQuery)}else if(jQuery)return function(a){c.name.endsWith("[]")||(c.name+="[]");var e=j=!1;a(c).parent().hasClass(d)?e=j=a(c).parent()[0]:(a(c).parent().length>0&&(j=a(c).parent()[0]),e=a('<div class="'+d+" "+d+"--"+c.tagName.toLowerCase()+'"></div>').append(c),j&&a(j).append(e)),""==a(c).val()?a(c).addClass("_-blank"):a(c).removeClass("_-blank"),a(c).on(b.ui.forms.e.infinite)}(jQuery),!0;return!1}},img:{load:function(c){c=c||{},a("._-page [data-_-img-load]").each(function(c,d){var e=d.getAttribute("data-_-img-load");a(d).addClass("_-loading").css({"background-image":""}),a('<img src="'+e+'" />').load(function(c){b.log("ui[img][load]",e,d,c),a(d).removeClass("_-loading").css({"background-image":"url('"+e+"')"})})})}},nav:{filter:function(a,c){if(!a)return!1;var d=close=pages=!1;a.currentTarget&&(d=a,a=a.currentTarget);var e=a.value;!function(d){close=d(a).siblings(".q--clear")[0],close&&(e?d(close).show():d(close).hide()),c=c||d(a).parents("._-menu").children("._-listing")[0]||!1,pages=d(c).find("._-page"),b.log("@@@pages",e,d(pages).not(":hidden")),d(pages).each(function(a,b){var c=d(b).find("._-page--name").text(),f=new RegExp(e,"gi");c.match(f)?d(b).show():d(b).hide()}),close&&(d(pages).not(":hidden").length>0?d(close).removeClass("_-not-found").addClass("_-found"):d(close).removeClass("_-found").addClass("_-not-found"))}(jQuery)},search:{clear:function(a){b.log("admin[nav][search][clear]",a.currentTarget);var c=a.currentTarget||a;a.stopPropagation(),function(a){a(c).siblings(".input--text").val(""),b.ui.nav.filter(c),a(c).hide()}(jQuery)},focus:function(a){a.stopPropagation()}}},scroll:{init:function(){}}};b.ui.editors.wysiwyg.e={frame:{"keyup._.wysiwyg.keyup":b.e.keyup,"keydown._.wysiwyg.keydown":b.e.keydown},gallery:{},img:{"mouseenter._.wysiwyg.img":b.ui.editors.wysiwyg.fn.img.mouseenter,"drag._.wysiwyg.img":b.ui.editors.wysiwyg.fn.drag},links:{"click._.wysiwyg.link":b.ui.editors.wysiwyg.fn.link},"_.wysiwyg.init":b.ui.editors.wysiwyg.fn.show,"_.wysiwyg.cleanup":b.ui.editors.wysiwyg.fn.destroy,"_.wysiwyg.destroy":b.ui.editors.wysiwyg.fn.destroy},b.ui.forms.e={ac:{"keyup._.form.ac.keyup":b.ui.forms.ac},infinite:{"keyup._.form.infinite.keyup":b.ui.forms.infinite}},b.ui.nav.e={filter:{clear:{"click._.nav.filter.click":b.ui.nav.search.clear},q:{"keyup._.nav.filter.keyup":b.ui.nav.filter,"click._.nav.filter.click":b.ui.nav.search.focus,"focus._.nav.filter.focus":b.ui.nav.search.focus}}},a(document).ready(function(){b.ui.init(),b.e.ready=!0}),a(window).load(function(){b.e.load=!0})}(jQuery,_);var WebFontConfig=_.ui.font._.WebFontConfig;!function(a,b){var c={_:"Google",parents:["API"]},d={};a._.add({_class:c,base:a._.api,constructor:function(){a._.parentConstruct(this,arguments,c),d=this,this._id=c._,this._cmd="google",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.uuid="",this.cfg=this.cfg||{},this.Map=function(c){var e=this;this.ele=c.ele,this.center=c.center||{lat:28.784251,lng:-81.357936},this.fullscreen=c.fullscreen||!1,this.view_mode=c.view_mode||"default",this.zoom=c.zoom||6,this.fullscreen&&(this.ele.style.width=window.outerWidth+"px",this.ele.style.height=window.outerHeight+"px",this.view_mode="fullscreen"),this.options=c.options||{center:this.center,zoom:this.zoom,mapTypeControl:!1,streetViewControl:!1,styles:c.styles||d.map.styles},this.map=new google.maps.Map(this.ele,this.options),this.places=new google.maps.places.PlacesService(this.map),this.markers={},this.add_marker=function(b){var c,d,f,g={};b.loc?(c=b.loc.lat||b.lat,d=b.loc.lng||b.lng):(c=b.lat,d=b.lng),f={lat:c,lng:d};var h=b.title||"";g.LatLng=new google.maps.LatLng(c,d),g._=new google.maps.Marker({position:g.LatLng,map:e.map,title:h}),a.admin._||(g.infobox=new InfoBox({content:e.infobox_content(b),disableAutoPan:!1,maxWidth:150,pixelOffset:new google.maps.Size(-140,-100),zIndex:null,boxStyle:{width:"360px"},infoBoxClearance:new google.maps.Size(1,1)})),google.maps.event.addListener(g._,"click",function(){for(var a in e.markers)e.markers.hasOwnProperty(a)&&e.markers[a].infobox&&e.markers[a].infobox.close();g.infobox&&g.infobox.open(e.map,this);var b=6;e.map.getZoom()<b&&e.map.setZoom(b),e.map.panTo(f)}),e.markers[c+"|"+d]=g},this.infobox_content=function(c){a.log(d._id+"[map][infobox][content]",c);var e='<a class="_-map--infobox--wrapper" href="#/sfm/map/'+c.slug+'">'+'<div class="_-map--infobox">'+'<h2 class="_-map--infobox--title">'+c.title+"</h2>"+"<p>"+c.len+" Vacation"+(1!==c.len?"s":"")+" at this Destination "+'<span class="_-icon _-icon--arrow--right">&#9658;</span></p>'+'<ul class="_-map--infobox--types">'+'<li class="_-map--infobox--type _-map--infobox--type--land '+(c.dests&&c.dests._.types.land?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--destination-land"></span>'+'<span class="_-text">Land</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.land?c.dests._.types.land:0)+"</span>"+"</li>"+'<li class="_-map--infobox--type _-map--infobox--type--air '+(c.dests&&c.dests._.types.air?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--destination-air"></span>'+'<span class="_-text">Air</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.air?c.dests._.types.air:0)+"</span>"+"</li>"+'<li class="_-map--infobox--type _-map--infobox--type--vacation '+(c.dests&&c.dests._.types.vacation?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--vacations"></span>'+'<span class="_-text">Vacation</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.vacation?c.dests._.types.vacation:0)+"</span>"+"</li>"+'<li class="_-map--infobox--type _-map--infobox--type--destination-cruise '+(c.dests&&c.dests._.types.cruise?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--destination-cruise"></span>'+'<span class="_-text">Cruise</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.cruise?c.dests._.types.cruise:0)+"</span>"+"</li>"+"</ul>"+"</div>"+"</a>";return b(e)[0]},this.nearby=function(b,c){if(!b)return!1;c=c||b.callback;var d=b.loc||e.center,f=b.radius?b.radius:5e3,g=b.types||b.type||[];return a.is.string(g)&&(g=g.split("|")),e.places.nearbySearch({location:new google.maps.LatLng(d.lat,d.lng),radius:f,types:g},c)},this.nearby_airports=function(c,f){f=f||c.callback;var g=c.loc||e.center,h=c.radius?c.radius:250,i="http://ws.geonames.org/findNearbyJSON?1";b.ajax({dataType:"json",type:"GET",url:i,data:{lat:g.lat,lng:g.lng,code:"AIRP",radius:h,featureClass:"S",featureCode:"AIRP",username:"sunfunmedia"},success:function(b){a.log(d._id+"[ui][nearby-airports][*get]",b)}})},this.overlays={_:{overlay:!1,content:!1,shown:!1},dest:function(a,c){var d=e.overlays._.overlay||b("._-over--map").get(0)||b('<div class="_-over _-over--map"><span class="_-bg--noise"></span><div class="_-over--content"></div></div>').appendTo("body").get(0);e.overlays._.overlay=d;var f=e.overlays._.content||d.getElementsByClassName("_-over--content")[0];if(e.overlays._.content=f,b(d).hide(),a.length>1)b.ajax({url:"/vacations/"+c.hash,success:function(a){e.overlays.show({data:a,hash:c})}});else if(a.length=1){var g=a.shift();b.ajax({url:"/vacations/map/"+g,success:function(a){e.overlays.show({data:a,hash:c})}})}},show:function(c){var f=c.data;b("body > ._-page").addClass("_-has--over");var f=b(f)[0];b(e.overlays._.content).html("").append(f),b(e.overlays._.overlay).show(),a.log("@@@",c.hash),b(document).on("click","._-over--map ._-over--content ._-btn--back",function(a){a.preventDefault(),window.location.href="#/sfm/map"}),e.overlays._.shown=!0,a.log(d._id+"[Map][overlay][show]",b("._-over--map ._-over--content ._-btn--back"),e.overlays._.overlay)},hide:function(c){return e.overlays._.shown?(a.log(d._id+"[Map][overlay][hide]",c,e.overlays._.overlay),b(e.overlays._.content).html(""),b(e.overlays._.overlay).hide(),b("body > ._-page").removeClass("_-has--over"),e.overlays._.shown=!1,!0):!1}},this.recenter=function(a){e.center=a,e.map.setCenter(e.center),"single"==e.view_mode&&(e.remove_markers(),e.add_marker({loc:a}))},this.remove_markers=function(){if(!e.markers)return!1;for(var a in e.markers)e.markers.hasOwnProperty(a)&&e.markers[a]._.setMap(null),delete e.markers[a]},this.resize=function(b){a.log(d._id+"[Map][resize]",b,e.map),e.center=e.map.getCenter(),google.maps.event.trigger(e.map,"resize"),e.map.setCenter(e.center),e.fullscreen&&(e.ele.style.width=window.outerWidth+"px",e.ele.style.height=window.outerHeight+"px")};var f=3;google.maps.event.addListener(this.map,"zoom_changed",function(){e.map.getZoom()<f&&e.map.setZoom(f)}),"single"==this.view_mode?(this.remove_markers(),this.add_marker({loc:this.center})):"fullscreen"==this.view_mode&&b.getJSON("/-/vacations",function(b){a.log(d._id+"[Map][*load][markers]",b);for(var c in b)b.hasOwnProperty(c)&&(b[c],e.add_marker({loc:b[c]._.loc,len:b[c]._.len,title:c,slug:b[c]._.slug,dests:b[c]}))}),b(window).resize(this.resize)},this.init()},proto:{init:function(){}}}),a.api.google=a.api.google||new a._.api.Google}(_,jQuery),function(a,b){var d={_:"SFM",parents:["API"]},e={};a._.add({_class:d,base:a._.api,constructor:function(c){a._.parentConstruct(this,arguments,d);var g=e=this;this._id=d._,this._cmd="sfm",this._attr="data-"+this._cmd,this._class="_-"+this._cmd,this.uuid="",this.cfg=this.cfg||{},this.cfg.results_per_row=4,this.auth={user:!1,pass:!1,token:!1,hash:!1},this.layers={chrome:!1},this.needs_auth=!1,this.scroll={ele:!1,data:!1},this.terms={},this.templates={header:c?c.tem.header||c.templates.header:!1,footer:c?c.tem.footer||c.templates.footer:!1},this.timeline=!1,this.timeline_ele=!1,this.version="v1",this.urls={base:"-",protocol:"http",host:window.location.hostname,load:"load",q:"q"},this.chrome={show:function(){return g.layers.chrome?(b(g.templates.header).show(),b(g.templates.footer).show(),!0):g.render_template("chrome")},hide:function(){return b("#"+g.templates.header.id).hide(),b("#"+g.templates.footer).hide(),!0}},this.init()},proto:{admin:{vacations:{_:{itin:{days:0,nights:0,day:[],night:[]}},init:function(c){c.map&&(e.map._=new e.Map({ele:c.map,view_mode:"single"}));var d={days:0,nights:0,day:[],night:[]},f=null;if(b('[data-_-vacation-migrate="url"]').change(function(c){var d=c.currentTarget,e="/-/proxy/"+Base64.encode(d.value).toString();a.log("@@@",e),b.ajax({url:e,success:function(c){var d=b(c),e=d.find(".detail");e.find(".back_map_view, .other_trips, .clear, .destination--testimonial").remove();var f=e.html();b('input[data-_-vacation-field="name"]').val(b("h1",d).text()),CKEDITOR&&CKEDITOR.instances["vacation[details]"]?CKEDITOR.instances["vacation[details]"].setData(f):b('textarea[data-_-vacation-field="details"]').val(f);var g=!1;if(g=d.find(".destination_pic").attr("src")){var h=b("._-ui--file-upload ._-ui--file-upload--img").get(0),i=b("._-ui--file-upload [data-_-ui-upload-result]").get(0),j=g.substr(g.lastIndexOf(".")+1);b(h).attr({src:"/-/proxy/"+Base64.encode("http://old.sunfunmedia.com"+g).toString(),"data-src":g,"data-src-ext":j}).load(function(){var d=document.createElement("canvas"),e=d.getContext("2d");d.width=h.width,d.height=h.height,e.drawImage(h,0,0,h.width,h.height);var f=i.value=d.toDataURL(j?"image/"+j:"");a.log("ui[file-upload]",h,f,b(wrapper).find("[data-_-ui-upload-result]").val())})}},error:function(b,c,d){a.log("@@@",d)}})}),f=b('[data-_-vacation-itin-control="day"]').get(0)){var g=function(c){if(!parseInt(f.value)||c&&c.keyCode&&a.key.is_meta(c.keyCode))return!1;d.days=parseInt(f.value);var g="data-_-vacation-itin-day",h=b("["+g+"]"),i=b(h).get(0),j=i.parentNode,k=!1;if(!h.length||h.length<d.days)for(var l=h.length+1;l<=d.days;l++)k=b(i).clone(),b(k).attr(g,l).find("._-input--text").attr("placeholder","Itinerary - Day #"+l).val(""),b(k).find("._-table--vacations--itin--num").text(l),b(k).appendTo(i.parentNode),a.log(e._id+"[ui][infinite][clone]",l,k,i.parentNode);else if(h.length>d.days)for(var l=h.length;l>d.days;l--)b(i.parentNode).find("["+g+'="'+l+'"]').remove();b(j).find('[data-_-vacation-itin-day="1"] ._-input--text, [data-_-vacation-itin-day="'+d.days+'"] ._-input--text').val(b(j).parents("form").find('[data-_-vacation-field="city--name"]').val())};b(f).on("change keyup",g),g()}e.admin.vacations._.itin=d}}},get:function(c){if(!c||!c.svc)return!1;var d=this;"lookup"==c.svc||"q"==c.svc||("layout"==c.svc?(a.log("? sfm[ajax][?]["+c.svc+"]",this.url({svc:c.svc}),c),b.ajax({type:"GET",url:this.url({svc:c.svc}),success:c.success||c.callback,failure:c.failure||c.fail||function(b){a.log("--- sfm[ajax]["+c.svc+"][fail]",b)}})):"login"==c.svc||"profile"==c.svc||"lookup"==c.svc?(a.log("? sfm[ajax][?]["+c.svc+"]",this.url({svc:c.svc}),c),b.ajax({type:"GET",url:this.url({svc:c.svc}),data:{},contentType:"application/json; charset=utf-8",beforeSend:function(a){a.setRequestHeader("Authorization","basic "+d.auth.hash)},error:function(b,d,e){a.log("--- sfm[ajax]["+c.svc+"][err]",b,d,e)},success:c.callback,failure:function(b){a.log("--- sfm[ajax]["+c.svc+"][fail]",b)}})):"forgot"==c.svc||"reset"==c.svc?(a.log("? sfm[ajax][?]["+c.svc+"]",this.url({svc:c.svc}),c),b.ajax({type:"POST",url:this.url({svc:c.svc}),data:JSON.stringify(c.data?c.data:{}),contentType:"application/json; charset=utf-8",success:c.callback,failure:function(b){a.log("--- sfm[ajax][fail]",b)}})):(a.log("? sfm[ajax][?]["+c.svc+"]",this.url({svc:c.svc}),c),b.ajax({type:"POST",url:this.url({svc:c.svc}),data:{},contentType:"application/json; charset=utf-8",beforeSend:function(a){a.setRequestHeader("Authorization","basic "+d.auth.hash)},success:c.callback,failure:function(b){a.log("--- sfm[ajax][fail]",b)}})))},go:function(b,c){var d=this;if(!b)return!1;if("view"==b)return c.uuid&&""!=c.uuid?d.redirect(d.url({svc:b,data:c,hashchange:!0})):!1;if("search"==b)return c.q&&""!=c.q?d.redirect(d.url({svc:b,data:c,hashchange:!0})):!1;if(!d.auth.user||d.auth.hash)d.timeline.go("login");else{if("login"==b&&d.auth.user&&d.auth.hash)return a.log("##"+d._id+"[go][*block]",b),!1;"next"==b?d.timeline.nextPage():"prev"==b?d.timeline.prevPage():d.timeline.go(b)}},init:function(){var e=this;this.register(),b(document).ready(function(){var c={play:15e3,animation:"slide"};a.field.init();var d=!1;(d=b("._-page--vacations ._-map--wrapper ._-map").get(0))?e.map._=new e.Map({ele:d,fullscreen:!0,zoom:3,center:{lat:15,lng:-35}}):b("._-page--admin-vacations").get(0)&&e.admin.vacations.init({map:b("._-page--admin-vacations ._-map--wrapper ._-map").get(0)}),b("._-page--home ._-gallery--wrapper").length?b("._-page--home ._-gallery--wrapper").superslides(c).on("animating.slides",function(){b("._-footer--top--pointer").fadeTo(125,0)}).on("animated.slides",function(){var d=b(this).find("._-gallery--slide--current").get(0);if(d){var e=d.getAttribute("data-slug");e&&(b('._-footer--top--pointers ._-footer--top--pointer[data-slug="'+e+'"]').fadeTo(125,1),a.log("gallery[e][animated][slides]",d,e,b('._-footer--top--pointers ._-footer--top--pointer[data-slug="'+e+'"]')))}}):(wrapper=b("._-page ._-gallery--sub--wrapper").get(0))&&(b(wrapper).find('._-gallery[data-_-gallery-init="false"]').length?(b(wrapper).attr("data-_-gallery-init",!1),c.play=!1):b("._-page ._-gallery--sub--wrapper").superslides(c)),e.nav.page.scroll.init(),e.nav.footer.scroll.init()})},init_links:function(){b("a[href]").each(function(a,b){var c=b.getAttribute("href");b.hasAttribute("data-href")||c.startsWith("#")||c.startsWith("/#")||!c.startsWith("/")||(b.setAttribute("href","/#!/-"+c),b.setAttribute("data-href",c))})},init_page:function(c){var d=this;if(c=c||a.page,!c||!c.slug)return!1;if(!this.scroll.ele&&(this.scroll.ele=b('[data-page-modal="false"] ._-step--overflow').get(0))){this.scroll.args={addTo:c.ele,animateScroll:!0,autoReinitialise:!0,showArrows:!1},a.window.ratios_current.skinny||(this.scroll.api=b(this.scroll.ele).jScrollPanes(this.scroll.args),this.scroll.data=b(this.scroll.ele).data("jsp"));var e=function(){return a.window.ratios_current.skinny?(d.scroll.api.destroy(),d.scroll.api=null,void 0):(d.scroll.api&&d.scroll.data||(d.scroll.api=b(d.scroll.ele).jScrollPanes(d.scroll.args),d.scroll.data=b(d.scroll.ele).data("jsp")),d.scroll.data.reinitialise(),void 0)};b(window).resize(e)}},e:{back:{click:function(b,c){var d=this instanceof a._.ViewModel?this:this.ViewModel;a.log(this._id+"[back][click]",b,c),d.view("listing")}},form:{},load:{success:function(a){return this.server.response.success(a)?this.ViewModel_setup(this.ViewModel,a):!1}}},load:function(a){if(vm=a&&a.vm?a.vm:this.ViewModel,!vm)return!1;var b=this;return this.get({svc:"load",success:function(){b.e.load.success.apply(b,arguments)}})},map:{_:null,styles:[{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#65c484"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#222222"},{weight:"0.50"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#65c484"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#9ed195"},{weight:"0"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{weight:"0"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#9ed195"},{weight:"0.75"},{lightness:"31"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{weight:"0.5"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{weight:".25"}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#00b3d1"},{visibility:"on"}]}]},Map:function(c){var d=this;this.ele=c.ele,this.center=c.center||{lat:28.784251,lng:-81.357936},this.fullscreen=c.fullscreen||!1,this.view_mode=c.view_mode||"default",this.zoom=c.zoom||6,this.fullscreen&&(this.ele.style.width=window.outerWidth+"px",this.ele.style.height=window.outerHeight+"px",this.view_mode="fullscreen"),this.options=c.options||{center:this.center,zoom:this.zoom,mapTypeControl:!1,streetViewControl:!1,styles:c.styles||e.map.styles},this.map=new google.maps.Map(this.ele,this.options),this.places=new google.maps.places.PlacesService(this.map),this.markers={},this.add_marker=function(b){var c,e,f,g={};b.loc?(c=b.loc.lat||b.lat,e=b.loc.lng||b.lng):(c=b.lat,e=b.lng),f={lat:c,lng:e};var h=b.title||"";g.LatLng=new google.maps.LatLng(c,e),g._=new google.maps.Marker({position:g.LatLng,map:d.map,title:h}),a.admin._||(g.infobox=new InfoBox({content:d.infobox_content(b),disableAutoPan:!1,maxWidth:150,pixelOffset:new google.maps.Size(-140,-100),zIndex:null,boxStyle:{width:"360px"},infoBoxClearance:new google.maps.Size(1,1)})),google.maps.event.addListener(g._,"click",function(){for(var a in d.markers)d.markers.hasOwnProperty(a)&&d.markers[a].infobox&&d.markers[a].infobox.close();g.infobox&&(g.infobox.open(d.map,this),d.clicked_marker={marker:g,map:d.map,context:this});var b=6;d.map.getZoom()<b&&d.map.setZoom(b),d.map.panTo(f)}),d.markers[c+"|"+e]=g},this.infobox_content=function(c){a.log(e._id+"[map][infobox][content]",c);var d='<a class="_-map--infobox--wrapper" href="#/sfm/map/'+c.slug+'">'+'<div class="_-map--infobox">'+'<h2 class="_-map--infobox--title">'+c.title+"</h2>"+"<p>"+c.len+" Vacation"+(1!==c.len?"s":"")+" at this Destination "+'<span class="_-icon _-icon--arrow--right">&#9658;</span></p>'+'<ul class="_-map--infobox--types">'+'<li class="_-map--infobox--type _-map--infobox--type--land '+(c.dests&&c.dests._.types.land?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--destination-land"></span>'+'<span class="_-text">Domestic</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.land?c.dests._.types.land:0)+"</span>"+"</li>"+'<li class="_-map--infobox--type _-map--infobox--type--air '+(c.dests&&c.dests._.types.air?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--destination-air"></span>'+'<span class="_-text">Air</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.air?c.dests._.types.air:0)+"</span>"+"</li>"+'<li class="_-map--infobox--type _-map--infobox--type--vacation '+(c.dests&&c.dests._.types.vacation?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--vacation"></span>'+'<span class="_-text">Intl</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.vacation?c.dests._.types.vacation:0)+"</span>"+"</li>"+'<li class="_-map--infobox--type _-map--infobox--type--destination-cruise '+(c.dests&&c.dests._.types.cruise?"_-selected":"_-hidden")+'">'+'<span class="_-icon--wrapper">'+'<span class="_-icon _-icon--font--destination-cruise"></span>'+'<span class="_-text">Cruise</span>'+"</span>"+'<span class="_-num">'+(c.dests&&c.dests._.types.cruise?c.dests._.types.cruise:0)+"</span>"+"</li>"+"</ul>"+"</div>"+"</a>";return b(d)[0]},this.nearby=function(b,c){if(!b)return!1;c=c||b.callback;var e=b.loc||d.center,f=b.radius?b.radius:5e3,g=b.types||b.type||[];return a.is.string(g)&&(g=g.split("|")),d.places.nearbySearch({location:new google.maps.LatLng(e.lat,e.lng),radius:f,types:g},c)},this.nearby_airports=function(c,f){f=f||c.callback;var g=c.loc||d.center,h=c.radius?c.radius:250,i="http://ws.geonames.org/findNearbyJSON?1";b.ajax({dataType:"json",type:"GET",url:i,data:{lat:g.lat,lng:g.lng,code:"AIRP",radius:h,featureClass:"S",featureCode:"AIRP",username:"sunfunmedia"},success:function(b){a.log(e._id+"[ui][nearby-airports][*get]",b)}})},this.overlays={_:{overlay:!1,content:!1,shown:!1},dest:function(a,c){var e=d.overlays._.overlay||b("._-over--map").get(0)||b('<div class="_-over _-over--map"><span class="_-bg--noise"></span><div class="_-over--content"></div></div>').appendTo("body").get(0);d.overlays._.overlay=e;var f=d.overlays._.content||e.getElementsByClassName("_-over--content")[0];if(d.overlays._.content=f,b(e).fadeOut(),a.length>1)b.ajax({url:"/vacations/"+c.hash,success:function(a){d.overlays.show({data:a,hash:c})}});else if(a.length=1){var g=a.shift();b.ajax({url:"/vacations/map/"+g,success:function(a){d.overlays.show({data:a,hash:c})}})}},show:function(c){var f=c.data;b("body > ._-page").addClass("_-has--over"),f=b(f)[0],d.overlays.title(b(f).attr("data-_-title")),b(d.overlays._.content).html("").append(f),b(d.overlays._.overlay).fadeIn(),a.ui.init(),d.clicked_marker&&d.clicked_marker.marker.infobox.close(),b("._-page--vacations--cta").fadeOut("slow"),b(document).on("click","._-over--map ._-over--content ._-btn--back",function(a){a.preventDefault(),window.location.href="#/sfm/map"}),d.overlays._.shown=!0,a.log(e._id+"[Map][overlay][show]",b("._-over--map ._-over--content ._-btn--back"),d.overlays._.overlay)},hide:function(c){return d.overlays._.shown?(a.log(e._id+"[Map][overlay][hide]",c,d.overlays._.overlay),b(d.overlays._.overlay).fadeOut(400,function(){b(d.overlays._.content).html(""),d.overlays.title(),d.clicked_marker&&(d.clicked_marker.marker.infobox.open(d.clicked_marker.map,d.clicked_marker.context),d.clicked_marker=null)}),b("._-page--vacations--cta").fadeIn("slow"),b("body > ._-page").removeClass("_-has--over"),d.overlays._.shown=!1,!0):!1},title:function(b){return a.title(b)}},this.recenter=function(a){d.center=a,d.map.setCenter(d.center),"single"==d.view_mode&&(d.remove_markers(),d.add_marker({loc:a}))},this.remove_markers=function(){if(!d.markers)return!1;for(var a in d.markers)d.markers.hasOwnProperty(a)&&d.markers[a]._.setMap(null),delete d.markers[a]},this.resize=function(b){a.log(e._id+"[Map][resize]",b,d.map),d.center=d.map.getCenter(),google.maps.event.trigger(d.map,"resize"),d.map.setCenter(d.center),d.fullscreen&&(d.ele.style.width=window.outerWidth+"px",d.ele.style.height=window.outerHeight+"px")};var f=3;google.maps.event.addListener(this.map,"zoom_changed",function(){d.map.getZoom()<f&&d.map.setZoom(f)}),"single"==this.view_mode?(this.remove_markers(),this.add_marker({loc:this.center})):"fullscreen"==this.view_mode&&b.getJSON("/-/vacations",function(b){a.log(e._id+"[Map][*load][markers]",b);for(var c in b)b.hasOwnProperty(c)&&(b[c],d.add_marker({loc:b[c]._.loc,len:b[c]._.len,title:c,slug:b[c]._.slug,dests:b[c]}))}),b(window).resize(this.resize)},nav:{footer:{scroll:{at_left:function(a){return a=a||this.ele,0==a.scrollLeft},at_right:function(a){return a=a||this.ele,a.scrollLeft+a.offsetWidth>=a.scrollWidth},e:function(){this.at_left()?b(this.buttons.left).addClass("_-hide"):b(this.buttons.left).removeClass("_-hide"),this.at_right()?b(this.buttons.right).addClass("_-hide"):b(this.buttons.right).removeClass("_-hide"),a.log("ui[nav][scroll][e]",this.at_left(),this.at_right(),this.ele.scrollLeft,this.ele.scrollWidth)},easing:"easeInQuad",increment:function(){return 2*b(this.ele).find("._-nav--item").width()},init:function(){this.wrapper=b("._-footer--scroll--wrapper")[0],this.ele=b(this.wrapper).find("._-chrome--footer--scroll")[0],this.buttons={_:b(this.wrapper).find("._-footer--scroll--buttons")[0]},this.buttons.left=b(this.buttons._).find("._-footer--scroll--buttons--left")[0],this.buttons.right=b(this.buttons._).find("._-footer--scroll--buttons--right")[0];var a=this;b(this.ele).scroll(function(b){a.e.apply(a,b)}).scroll(),b(this.buttons.left).click(function(b){a.left.apply(a,b)}),b(this.buttons.right).click(function(b){a.right.apply(a,b)}),this.nav_item()},left:function(c){c?c.currentTarget||c:!1;var e=this.ele.scrollLeft-this.increment();0>e&&(e=0),b(this.ele).animate({scrollLeft:e},{easing:this.easing}),a.log("ui[nav][scroll][left]",this.ele)},nav_item:function(){this.ele.scrollLeft;var d;return(d=b(this.ele).find("._-footer--nav ._-nav--item._-selected").get(0))?(this.ele.scrollLeft=d.offsetLeft,void 0):!1},right:function(c){c?c.currentTarget||c:!1;var e=this.ele.scrollLeft+this.increment();e>this.ele.scrollWidth&&(e=this.ele.scrollWidth),b(this.ele).animate({scrollLeft:e},{easing:this.easing}),a.log("ui[nav][scroll][right]",this.ele,this.increment())}}},page:{scroll:{_:{},init:function(){var d=function(c){var d=function(){a.window.ratios_current.skinny?b(c).mCustomScrollbar("destroy").removeClass("_-scroll"):b(c).hasClass("_-scroll")||b(c).mCustomScrollbar({scrollbarPosition:"inside",theme:"inset-3-dark",advanced:{updateOnBrowserResize:!0,updateOnContentResize:!0}}).addClass("_-scroll")};b(window).resize(d)};b("._-context--desktop ._-page ._-page--content").each(function(a,c){return b(c).find("._-gallery").length?!1:(d(c),void 0)})},reinit:function(){b.browser.msie&&parseInt(b.browser.version,10)<=8?(masks.scroll_pane=b(masks.content).jScrollPane({addTo:b("#content_wrapper_inner")[0],animateEast:portfolio_scroll_transition,animateScroll:!0,showArrows:!1}),masks.scroll_pane_api=masks.scroll_pane.data("jsp")):(e.nav.page.scroll._._.reinitialise(),b(".jspContainer").height()>=b("._-page ._-page--content--inner").height()?b(".jspVerticalBar").hide():b(".jspVerticalBar").show())}}}},noise:{draw:function(c){var d;if((d=b(c).find("canvas").get(0))||(d=document.createElement("canvas"),b(c).append(d)),!d)return!1;d.width=c.offsetWidth||window.innerWidth,d.height=c.offsetHeight||window.innerHeight;for(var e=d.getContext("2d"),f={r:241,g:242,b:242,a:1},g=0;g<d.width;g++)for(var h=0;h<d.height;h++)f.a=(Math.random()*-.085+.085).toFixed(3),e.fillStyle="rgba("+f.r+","+f.g+","+f.b+","+f.a+")",e.fillRect(g,h,1,1);a.log("@@@",c,window.innerWidth,d.width,d.height,e,c)},points:function(){var a,b,c,d,e;do a=2*Math.random()-1,b=2*Math.random()-1,c=a*a+b*b;while(c>=1);return c=Math.sqrt(-2*Math.log(c)/c),d=a*c,e=b*c,[a,b,d,e]}},q:function(b){var c=b.shift()||b;return a.log(this._id+"[q]",c,b,this.ViewModel.eles.q),c&&(this.ViewModel.eles.q.value=c),this.search(!1,{currentTarget:this.ViewModel.eles.q})},redirect:function(a){return a&&""!=a?("#"==a.charAt(0)?window.location.hash=a:window.location.href=a,!0):!1},register:function(b){a._[d.parents[0]].prototype.register.call(this,b)},render_template:function(b){return b?(a.log(this._id+"[render][tem]",this.templates,b),"chrome"!=b||this.layers.chrome?!1:(this.layers.chrome=new a._.Layer({ele:this.timeline_ele,timeline:this.timeline,prepend:!0}),this.templates.header&&document.getElementsByTagName("body")[0].appendChild(this.templates.header),this.templates.footer&&document.getElementsByTagName("body")[0].appendChild(this.templates.footer),!0)):!1},results_have_next_row:function(){var b=!1;return b=this instanceof a._.ViewModel?this:this.ViewModel||a.api.sfm.ViewModel,b.results_row_i()<b.results_num_rows()-1},results_have_prev_row:function(){var b=!1;return b=this instanceof a._.ViewModel?this:this.ViewModel||a.api.sfm.ViewModel,b.results_row_i()>0},results_next_row:function(){var d=!1;return d=this instanceof a._.ViewModel?this:this.ViewModel||a.api.sfm.ViewModel,d.results_row_i()<d.results_num_rows()-1?(d.results_row_i(d.results_row_i()+1),!0):!1},results_prev_row:function(){var b=!1;return b=this instanceof a._.ViewModel?this:this.ViewModel,b.results_row_i()>0?(b.results_row_i(b.results_row_i()-1),!0):!1},route:function(b,c){var d=a.router.sep||"/",e=c._url||window.location.pathname.substring(1).split(d),f=c._hash||window.location.hash.substring(2).split(d),h=(e.join(d),f.join(d)),i=f.shift()||"load";if(!h||!i)return a.log(this._id+"[route][empty]",h),!1;if(a.log(this._id+"[route]["+i+"]",h,f),this[i]){if("map"==i){if(f.length>=2)return this.map._.overlays.dest(f,c);if(1==f.length)return this.map._.overlays.dest(f,c);if(!f.length)return this.map._.overlays.hide()}this[i](f)}},server:{response:{success:function(a){return a&&!a.err&&a.res?!0:!1},err:function(a){return!this.server.response.success(a)},error:function(a){return this.server.response.err(a)},fail:function(a){return this.server.response.err(a)}}},url:function(a){var b=a.svc||a.service||a,c=!1;if(!b)return!1;switch(b.toLowerCase()){case"layout":return"/"+b;case"view":return(a.hashchange?"#":"")+"/sfm/term/"+a.data.uuid+"/"+a.data.slug;case"search":return(a.hashchange?"#":"")+"/sfm/q/"+a.data.q}return this.urls.protocol+"://"+this.urls.host+"/"+this.urls.base+"/"+(c?this.version+"/":"")+(this.urls[b]?this.urls[b]:"")},vacations:{mercator_bounds:function(a,b){var c=a.rotate()[0],d=a([-c+180-1e-6,-b]),e=a([-c-180+1e-6,b]);return[e,d]},projection:!1,redraw:function(){},resize:function(){},init2:function(){}}}}),a.e.sfm={},a.api.sfm=a.api.sfm||new a._.api.SFM}(_,jQuery,"undefined"!=typeof ko?ko:{});